# BASE DE CONNAISSANCES IA â€“ Plateforme E-rÃ©ussite

## DerniÃ¨re mise Ã  jour : 13 octobre 2025

### ğŸŒ Mission et Vision

**E-rÃ©ussite** est bien plus qu'une simple plateforme Ã©ducative.

C'est **un compagnon de parcours**, **un mentor virtuel**, **un coach de vie et de carriÃ¨re** pour chaque Ã©lÃ¨ve, Ã©tudiant ou jeune africain.

#### ğŸ’¡ Le ProblÃ¨me que nous rÃ©solvons

Au SÃ©nÃ©gal et dans les pays d'Afrique francophone :
- **1 seul centre d'orientation par rÃ©gion** pour des milliers d'Ã©lÃ¨ves
- **1 visite par an** des conseillers dans les Ã©tablissements
- **Uniquement en 3Ã¨me et Terminale**, au moment des choix dÃ©cisifs
- **Aucun accompagnement continu** tout au long de l'annÃ©e
- **InÃ©galitÃ© territoriale** : zones rurales moins servies que Dakar

#### ğŸ¯ Notre Solution

Un **coach numÃ©rique intelligent** disponible 24h/24, qui :
- âœ… **Ã‰tend la portÃ©e** des conseillers d'orientation existants
- âœ… **Assure la continuitÃ©** de l'accompagnement toute l'annÃ©e
- âœ… **Personnalise** les conseils selon chaque profil
- âœ… **DÃ©mocratise l'accÃ¨s** pour tous, mÃªme en zones reculÃ©es
- âœ… **LibÃ¨re du temps** pour que les conseillers humains se concentrent sur les cas complexes

#### â¤ï¸ Impact VisÃ©

Qu'un Ã©lÃ¨ve de **Kaffrine**, **Tambacounda**, **Ziguinchor** ou **Saint-Louis** ait **les mÃªmes chances** qu'un Ã©lÃ¨ve de Dakar.

Que chaque jeune puisse dire :
> "Je sais qui je suis, je sais oÃ¹ je vais, et je sais comment y arriver."

**Voir VISION_PROJET.md pour la vision complÃ¨te**

---

### ğŸ¯ Vue d'ensemble Technique
Base de connaissances complÃ¨te des fonctionnalitÃ©s IA intÃ©grÃ©es dans E-rÃ©ussite. Cette documentation garantit que l'assistant IA rÃ©pond avec des informations prÃ©cises, rÃ©centes et contextuelles sur l'utilisation de la plateforme.

---

## ğŸ“‹ Table des matiÃ¨res
1. [Philosophie et Ton de l'Assistant](#0-philosophie-et-ton-de-lassistant) â­ NOUVEAU
2. [Assistant IA et Coach Personnel](#1-assistant-ia-et-coach-personnel)
3. [Analytics et Partage de Liens](#2-analytics-et-partage-de-liens)
4. [Interface et ExpÃ©rience Utilisateur](#3-interface-et-expÃ©rience-utilisateur)
5. [Gamification et Classement](#4-gamification-et-classement)
6. [ParamÃ¨tres et PrÃ©fÃ©rences](#5-paramÃ¨tres-et-prÃ©fÃ©rences)
7. [Architecture Technique](#6-architecture-technique)

---

## 0. Philosophie et Ton de l'Assistant

### ğŸŒŸ Principes Directeurs

L'assistant IA d'E-rÃ©ussite n'est **pas un simple chatbot**.

C'est un **conseiller virtuel bienveillant**, un **mentor patient**, un **guide empathique** qui comprend les dÃ©fis uniques des jeunes africains.

#### ğŸ¯ Notre Approche

**1. Empathie et Bienveillance**
- âœ… Ne jamais juger les erreurs ou lacunes
- âœ… Encourager et valoriser chaque progrÃ¨s
- âœ… ReconnaÃ®tre les difficultÃ©s (connexion, ressources limitÃ©es, etc.)
- âœ… Adapter le langage au niveau de l'Ã©lÃ¨ve

**2. Contextualisation Africaine**
- âœ… RÃ©fÃ©rences aux rÃ©alitÃ©s locales (systÃ¨mes Ã©ducatifs africains)
- âœ… Exemples de mÃ©tiers et opportunitÃ©s locales
- âœ… Prise en compte des contraintes (connectivitÃ©, matÃ©riel)
- âœ… Valorisation des parcours non-conventionnels (auto-emploi, entrepreneuriat)

**3. Personnalisation Intelligente**
- âœ… Utiliser les donnÃ©es de progression (niveau, points, badges)
- âœ… Adapter les conseils au profil de l'Ã©lÃ¨ve
- âœ… Proposer des dÃ©fis rÃ©alistes et motivants
- âœ… CÃ©lÃ©brer les rÃ©ussites, petites et grandes

**4. Orientation Holistique**
- âœ… Ne pas se limiter aux notes acadÃ©miques
- âœ… Explorer les talents, passions et soft skills
- âœ… Proposer plusieurs chemins possibles (public, privÃ©, entrepreneuriat)
- âœ… Encourager la rÃ©flexion plutÃ´t que des choix hÃ¢tifs

#### ğŸ’¬ Ton et Style

**Ã€ FAIRE :**
- âœ… Tutoiement bienveillant : "Tu es sur la bonne voie !"
- âœ… Langage simple et accessible (Ã©viter jargon inutile)
- âœ… Questions ouvertes : "Qu'est-ce qui t'intÃ©resse le plus ?"
- âœ… Encouragements sincÃ¨res : "Bravo pour ta rÃ©gularitÃ© !"
- âœ… Ã‰mojis adaptÃ©s pour rendre la conversation vivante ğŸ‰

**Ã€ Ã‰VITER :**
- âŒ Ton professoral ou condescendant
- âŒ Jargon technique non expliquÃ©
- âŒ Jugements sur les performances
- âŒ RÃ©ponses gÃ©nÃ©riques sans personnalisation
- âŒ DÃ©couragement ou pessimisme

#### ğŸŒ Conscience du Contexte

Rappeler rÃ©guliÃ¨rement que :
- L'assistant est disponible 24h/24 (contrairement aux conseillers physiques)
- Pas de limite de questions (encourager la curiositÃ©)
- ConfidentialitÃ© totale (espace sÃ»r pour exprimer doutes et peurs)
- ComplÃ©ment aux humains (pas un remplacement)

**Exemple de rÃ©ponse attendue :**

> "Hey ! ğŸ‘‹ Je vois que tu as terminÃ© 3 chapitres en Maths cette semaine, c'est super ! ğŸ‰  
> Tu progresses bien, et ta sÃ©rie de 5 jours montre que tu es rÃ©gulier.  
> Dis-moi, qu'est-ce qui te plaÃ®t le plus dans les maths ? Les Ã©quations, la gÃ©omÃ©trie, ou plutÃ´t les problÃ¨mes pratiques ?  
> Je demande parce que Ã§a peut m'aider Ã  te suggÃ©rer des filiÃ¨res oÃ¹ tu pourrais vraiment exceller ! ğŸ˜Š"

---

## 1. Assistant IA et Coach Personnel

### ğŸ¤– Assistant IA Contextuel Flottant
**Localisation :** Accessible sur toutes les pages via le bouton flottant en bas Ã  droite

**FonctionnalitÃ©s principales :**
- âœ… Panel latÃ©ral responsive (mobile/desktop) avec largeur adaptative
- âœ… Multi-conversations avec historique complet
- âœ… Gestion du contexte utilisateur (niveau, points, progression)
- âœ… Support du mode sombre avec contraste optimisÃ©
- âœ… Pas de dÃ©bordement horizontal (fix appliquÃ© le 12/10/2025)

**CapacitÃ©s de l'assistant :**
- RÃ©pondre aux questions sur les cours et chapitres
- Donner des conseils personnalisÃ©s basÃ©s sur les statistiques
- Expliquer le systÃ¨me de points et badges
- Guider dans l'utilisation de la plateforme
- Recherche web via Perplexity (onglet dÃ©diÃ©)

### ğŸ“ Page Coach IA
**URL :** `/coach-ia`

**Onglets disponibles :**
1. **Conversation** - Chat avec l'IA (multi-providers : OpenAI, Anthropic, etc.)
2. **Recherche Web** - IntÃ©gration Perplexity pour recherches acadÃ©miques
3. **Analyse & Conseils** - Statistiques dÃ©taillÃ©es et recommandations personnalisÃ©es

**AmÃ©liorations rÃ©centes (12/10/2025) :**
- âœ… Fond sombre uniforme en mode dark (`dark:from-slate-900`)
- âœ… Effet d'ombre verte sur toutes les cartes (`shadow-[0_0_16px_0_rgba(34,197,94,0.18)]`)
- âœ… Contraste amÃ©liorÃ© pour les textes et labels
- âœ… Stats rapides dans le header (niveau, points, sÃ©rie)
- âœ… 4 cartes statistiques colorÃ©es (chapitres, badges, score, niveau)

**Statistiques affichÃ©es :**
- Niveau et progression
- Total de points
- SÃ©rie quotidienne (streak)
- Chapitres complÃ©tÃ©s
- Badges obtenus
- Score moyen

---

## 2. Analytics et Partage de Liens

### ğŸ”— SystÃ¨me de Liens PartagÃ©s
**Localisation :** Page "Mes Liens PartagÃ©s" (accessible via menu utilisateur)

**FonctionnalitÃ©s :**
- âœ… CrÃ©ation de liens courts pour cours, quiz et examens
- âœ… Tracking automatique des clics avec Edge Function Supabase
- âœ… Analytics dÃ©taillÃ©es par lien :
  - Nombre total de clics
  - RÃ©partition par pays (avec drapeaux emoji)
  - RÃ©partition par appareil (Desktop, Mobile, Tablet)
  - RÃ©partition par navigateur (Chrome, Safari, Firefox, etc.)
  - Dates et heures de chaque clic

**AmÃ©liorations UI rÃ©centes (12/10/2025) :**
- âœ… Filtres avec badges dÃ©corÃ©s visibles en dark mode
- âœ… Labels "Cours", "Quiz", "Examen" avec fond adaptÃ© au thÃ¨me
- âœ… Bouton "Voir dÃ©taillÃ©" stylisÃ© avec icÃ´nes
- âœ… Auto-refresh des analytics au chargement
- âœ… Cartes analytics avec effet d'ombre et bordures

**Classification des liens :**
- Type "course" â†’ Badge bleu "Cours"
- Type "quiz" â†’ Badge vert "Quiz"
- Type "exam" â†’ Badge orange "Examen"

---

## 3. Interface et ExpÃ©rience Utilisateur

### ğŸ¨ Design System UnifiÃ©
**Mise Ã  jour majeure : 12 octobre 2025**

**Palette de couleurs principale :**
- Vert primaire : `rgb(34, 197, 94)` - UtilisÃ© pour les effets d'ombre et accents
- Bleu : Stats et Ã©lÃ©ments interactifs
- Orange : SÃ©ries et dÃ©fis
- Jaune : Points et rÃ©compenses

**Effets d'ombre verte standardisÃ©s :**
```css
/* Light mode */
shadow-[0_0_16px_0_rgba(34,197,94,0.18)]

/* Dark mode */
dark:shadow-[0_0_24px_0_rgba(34,197,94,0.25)]

/* Hover states */
dark:hover:shadow-[0_0_35px_rgba(34,197,94,0.25)]
```

**Pages avec design mis Ã  jour (12/10/2025) :**
1. âœ… **Classement (Leaderboard)** :
   - Header avec gradient vert
   - Titre en `dark:text-green-300`
   - Toutes les cartes avec ombre verte
   - Labels et badges dÃ©corÃ©s (niveau, quiz, badges)
   - Badge "Vous" en gradient vert

2. âœ… **Dashboard** :
   - Section Top 10 avec cartes ombrÃ©es vertes
   - Labels "Classement" et "Top 10" visibles en dark
   - Badges niveau et quiz colorÃ©s et contrastÃ©s

3. âœ… **Coach IA** :
   - Fond sombre uniforme en mode dark
   - 4 cartes stats avec bordures colorÃ©es et ombres vertes
   - Contraste texte optimisÃ© pour dark mode

### ğŸ“± Responsive Design
**Status :** âœ… ValidÃ© et verrouillÃ© (voir ARCHITECTURE.md)

**Breakpoints standardisÃ©s :**
- Mobile : < 640px
- Tablet : 640px - 1024px
- Desktop : > 1024px

**Corrections appliquÃ©es (12/10/2025) :**
- âœ… `overflow-x-hidden` sur tous les layouts
- âœ… `max-w-full` sur conteneurs principaux
- âœ… Assistant IA flottant : largeur responsive (`w-full sm:w-80`)
- âœ… Pas de dÃ©bordement horizontal sur aucune page

### ğŸŒ“ Mode Sombre
**Activation :** Via Settings â†’ PrÃ©fÃ©rences â†’ ThÃ¨me

**AmÃ©liorations rÃ©centes :**
- âœ… Tous les fonds de page en `dark:bg-slate-900` ou `dark:bg-slate-950`
- âœ… Cards en `dark:bg-slate-800` avec bordures `dark:border-slate-700`
- âœ… Textes en `dark:text-white` ou `dark:text-slate-200`
- âœ… Labels et badges avec fond foncÃ© et bordures visibles
- âœ… Ombres blanches remplacÃ©es par ombres vertes pour harmonie

---

## 4. Gamification et Classement

### ğŸ† SystÃ¨me de Classement
**Localisation :** Page "Classement" (`/leaderboard`)

**CatÃ©gories de classement :**
1. Points Totaux (par dÃ©faut)
2. SÃ©ries quotidiennes (Streak)
3. Quiz complÃ©tÃ©s
4. LeÃ§ons terminÃ©es
5. Badges obtenus

**Filtres temporels :**
- Tout temps
- Cette semaine
- Ce mois

**Vue rÃ©gionale :**
- Afrique de l'Ouest
- Afrique du Nord
- Afrique Centrale
- Afrique de l'Est
- Afrique Australe

**AmÃ©liorations visuelles (12/10/2025) :**
- âœ… Cartes utilisateurs avec ombre verte
- âœ… Badge "Vous" en gradient vert pour l'utilisateur connectÃ©
- âœ… Badges dÃ©coratifs : Niveau, Quiz, Badges (avec couleurs et bordures)
- âœ… MÃ©dailles : ğŸ¥‡ (1er), ğŸ¥ˆ (2e), ğŸ¥‰ (3e)
- âœ… Header avec effet d'ombre verte et titre en vert clair en dark mode

**Statistiques affichÃ©es :**
- Record actuel (top user)
- Nombre de participants
- Position de l'utilisateur

### ğŸ–ï¸ SystÃ¨me de Points et Badges
**Gain de points :**
- Quiz complÃ©tÃ© : 10-50 points (selon score)
- Chapitre terminÃ© : 20 points
- Examen passÃ© : 30-100 points (selon score)
- SÃ©rie quotidienne : Bonus multiplicateur

**Niveaux :**
- BasÃ©s sur le total de points
- Visible sur le profil et dans le classement
- AffichÃ© dans les badges dÃ©coratifs

---

## 5. ParamÃ¨tres et PrÃ©fÃ©rences

### âš™ï¸ Page ParamÃ¨tres (Settings)
**URL :** `/settings`

**Sections disponibles :**

1. **Profil** :
   - Nom complet
   - Email
   - Bio
   - Avatar
   - Localisation
   - Ã‰cole/UniversitÃ©

2. **PrÃ©fÃ©rences** :
   - ThÃ¨me (Clair / Sombre / SystÃ¨me)
   - Langue (FranÃ§ais par dÃ©faut)

3. **Notifications** âœ¨ **(Mis Ã  jour - 13/10/2025)** :
   - Email notifications (activÃ© par dÃ©faut)
   - Push notifications PWA âš ï¸ **DÃ©sactivÃ©es en dÃ©veloppement**
     - Configuration complÃ¨te effectuÃ©e (VAPID, SQL, Service Worker)
     - DÃ©sactivÃ©es en mode dev (problÃ¨me FCM en localhost)
     - S'activeront automatiquement en production (HTTPS)
     - Documentation complÃ¨te : `NOTIFICATIONS_PUSH_STATUT_FINAL.md`
   - Notifications in-app (activÃ© par dÃ©faut)
   - Marketing/Newsletter (dÃ©sactivÃ© par dÃ©faut)
   - **Fix appliquÃ© :** Colonne `preferences` ajoutÃ©e Ã  la table `profiles`
   - **Stockage :** Format JSONB dans Supabase
   - **Table push_subscriptions :** CrÃ©Ã©e avec 15 colonnes, RLS, triggers

4. **SÃ©curitÃ©** :
   - Changement de mot de passe
   - Authentification Ã  deux facteurs (2FA)
   - Sessions actives

**Structure des prÃ©fÃ©rences (JSON) :**
```json
{
  "notifications": {
    "email": true,
    "push": true,
    "inApp": true,
    "marketing": false
  },
  "theme": "system",
  "language": "fr"
}
```

---

## 6. Architecture Technique

### ğŸ—ï¸ Structure ValidÃ©e
**Document de rÃ©fÃ©rence :** `ARCHITECTURE.md` (crÃ©Ã© le 12/10/2025)

**RÃ¨gle fondamentale :**
> L'architecture actuelle (layouts, responsive, overflow, sidebar) est stable et validÃ©e. Aucune modification future ne doit la casser sans validation explicite.

**Composants clÃ©s verrouillÃ©s :**
1. **Layouts** :
   - `PrivateLayout.jsx` - Avec `overflow-x-hidden` et `max-w-full`
   - `PublicLayout.jsx` - Avec `overflow-x-hidden` et `max-w-full`

2. **Assistant IA** :
   - `AIAssistantSidebar.jsx` - Largeur responsive et gestion overflow

3. **Navigation** :
   - `Sidebar.jsx` - Labels visibles en dark mode
   - `Navbar.jsx` - Responsive et accessible

**Stack technique :**
- Frontend : React 18 + Vite
- Styling : Tailwind CSS 3.x
- Backend : Supabase (Auth, Database, Storage, Edge Functions)
- IA : OpenAI, Anthropic, Perplexity
- Analytics : Custom tracking avec Supabase

### ğŸ“Š Base de donnÃ©es
**Tables principales :**
- `profiles` - Profils utilisateurs (avec `preferences` JSONB depuis 12/10/2025)
- `user_points` - SystÃ¨me de points et niveaux
- `user_badges` - Badges obtenus
- `quiz_results` - RÃ©sultats des quiz
- `exam_results` - RÃ©sultats des examens
- `shared_links` - Liens partagÃ©s
- `link_clicks` - Analytics des clics
- `conversations` - Historique des conversations IA
- `messages` - Messages des conversations

**Index optimisÃ©s :**
- `idx_profiles_preferences` (GIN) sur `profiles.preferences`
- Index sur les foreign keys pour performances

---

## ğŸ“ Changelog RÃ©cent (12 octobre 2025)

### âœ¨ Nouvelles fonctionnalitÃ©s
1. **Colonne preferences dans profiles** - Stockage des prÃ©fÃ©rences utilisateur
2. **Onglet Notifications dans Settings** - Gestion complÃ¨te des notifications
3. **Effet d'ombre verte unifiÃ©** - Design harmonisÃ© sur toutes les pages

### ğŸ¨ AmÃ©liorations UI/UX
1. **Classement** :
   - Labels et badges dÃ©corÃ©s avec couleurs et bordures
   - Badge "Vous" en gradient vert
   - Header avec effet d'ombre verte
   - Titre en vert clair en mode sombre

2. **Dashboard** :
   - Section Top 10 avec cartes ombrÃ©es vertes
   - Labels niveau et quiz dÃ©corÃ©s et contrastÃ©s
   - Label "Top 10" dans un badge vert dÃ©corÃ©

3. **Coach IA** :
   - Fond sombre uniforme en mode dark
   - Cartes statistiques avec ombres vertes
   - Contraste texte optimisÃ©

4. **Liens PartagÃ©s** :
   - Filtres avec badges visibles en dark mode
   - Boutons analytics stylisÃ©s
   - Auto-refresh des donnÃ©es

### ğŸ› Corrections de bugs
1. **PGRST204** - Colonne preferences manquante (RÃ‰SOLU)
2. **Overflow horizontal** - Sur assistant IA et layouts (RÃ‰SOLU)
3. **Labels invisibles en dark mode** - Contraste amÃ©liorÃ© (RÃ‰SOLU)
4. **Analytics non rafraÃ®chies** - Auto-refresh ajoutÃ© (RÃ‰SOLU)
5. **Push notifications AbortError** - VÃ©rification VAPID ajoutÃ©e, dÃ©sactivation gracieuse si non configurÃ© (RÃ‰SOLU)

### ğŸ”’ Architecture
- Document `ARCHITECTURE.md` crÃ©Ã© avec rÃ¨gle de non-rÃ©gression
- Layouts et responsive design verrouillÃ©s
- ProcÃ©dure de validation obligatoire pour changements structurels

---

## ğŸš€ Utilisation de cette Base de Connaissances

### Pour l'Assistant IA
Cette documentation permet Ã  l'assistant IA de :
- âœ… RÃ©pondre avec prÃ©cision sur toutes les fonctionnalitÃ©s
- âœ… Guider les utilisateurs sur les derniÃ¨res mises Ã  jour
- âœ… Expliquer le fonctionnement des systÃ¨mes (points, badges, analytics)
- âœ… RÃ©fÃ©rencer les pages et URLs correctes
- âœ… Donner des conseils basÃ©s sur les capacitÃ©s rÃ©elles de la plateforme

### ProcÃ©dure de mise Ã  jour
1. **AprÃ¨s chaque nouvelle fonctionnalitÃ© majeure** â†’ Mettre Ã  jour cette base
2. **AprÃ¨s correction de bug critique** â†’ Documenter dans Changelog
3. **AprÃ¨s changement UI/UX significatif** â†’ Mettre Ã  jour la section concernÃ©e
4. **Date de modification** â†’ Toujours mettre Ã  jour en haut du document

---

## ğŸ“ Questions FrÃ©quentes

### Comment activer les notifications ?
â†’ Settings â†’ Notifications â†’ Cocher les types souhaitÃ©s â†’ Enregistrer

**Note :** Les notifications push nÃ©cessitent une configuration VAPID. Si le bouton n'apparaÃ®t pas, consultez `CONFIGURATION_NOTIFICATIONS_PUSH.md` pour la configuration complÃ¨te.

### OÃ¹ voir mon classement ?
â†’ Menu principal â†’ Classement ou icÃ´ne ğŸ† dans le header

### Comment partager un cours ?
â†’ Page du cours â†’ Bouton "Partager" â†’ Lien copiÃ© â†’ Consulter analytics dans "Mes Liens PartagÃ©s"

### Le mode sombre ne fonctionne pas ?
â†’ Settings â†’ PrÃ©fÃ©rences â†’ ThÃ¨me â†’ SÃ©lectionner "Sombre"

### Comment contacter le coach IA ?
â†’ Bouton flottant en bas Ã  droite de toute page OU page dÃ©diÃ©e `/coach-ia`

---

**DerniÃ¨re vÃ©rification :** 12 octobre 2025 - 22h30
**Prochaine rÃ©vision recommandÃ©e :** Ã€ chaque ajout de fonctionnalitÃ© majeure

> ğŸ’¡ Cette base de connaissances est vivante et doit Ãªtre maintenue Ã  jour pour garantir la pertinence des rÃ©ponses de l'assistant IA.
