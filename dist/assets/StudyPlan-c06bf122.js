import{r as e,j as s}from"./vendor-react-470eca1f.js";import{e as a,B as t,C as l,a as r,b as i,c as n}from"./index-80385b81.js";import{T as c,a as d,b as o,c as x}from"./tabs-04421a9d.js";import{P as m}from"./progress-d9418a6f.js";import{N as h}from"./Navbar-fef78110.js";import{A as p}from"./aiCoachService-d7596553.js";import{c as j}from"./vendor-router-da2b77bd.js";import{m as g}from"./vendor-charts-0ffd78b1.js";import{a as b,bz as u,q as N,m as f,g as v,A as y,C as w,a7 as P,J as C,ap as S,c as A,ao as k}from"./vendor-ui-297a683c.js";import"./vendor-supabase-1d8f37f5.js";const D=()=>{var D,F,L,M,T,z;const{user:E}=a(),R=j(),[V,$]=e.useState(!0),[I,O]=e.useState(null),[U,_]=e.useState(null);e.useEffect(()=>{E&&q()},[E]);const q=async()=>{try{$(!0);const e=new p(E.id),s=await e.analyzePerformance(),a=await e.generateStudyPlan(null,2);O(s),_(a)}catch(e){}finally{$(!1)}},B=e=>{"course"===e?R("/courses"):"exam"===e?R("/exams"):"subject"===e&&R("/subjects")},J=e=>e>=.8?{label:"√âlev√©e",color:"text-green-600",bg:"bg-green-100"}:e>=.5?{label:"Moyenne",color:"text-yellow-600",bg:"bg-yellow-100"}:{label:"Faible",color:"text-red-600",bg:"bg-red-100"};return V?s.jsxs(s.Fragment,{children:[s.jsx(h,{}),s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 pt-20",children:s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsxs("div",{className:"flex flex-col items-center gap-4",children:[s.jsx(g.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:s.jsx(b,{className:"w-12 h-12 text-primary"})}),s.jsx("p",{className:"text-slate-600 font-medium",children:"Analyse de vos performances..."})]})})})]}):I&&U&&I.predictions&&I.overall?s.jsxs(s.Fragment,{children:[s.jsx(h,{}),s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:s.jsxs("main",{className:"container max-w-7xl mx-auto px-4 py-8 pt-24",children:[s.jsx("div",{className:"mb-8",children:s.jsxs(g.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[s.jsx("h1",{className:"text-4xl font-bold mb-3 bg-gradient-to-r from-primary to-blue-600 bg-clip-text text-transparent",children:"üìö Plan d'√âtude Personnalis√©"}),s.jsx("p",{className:"text-slate-600 text-lg",children:"Optimisez votre apprentissage avec des pr√©dictions et un plan adapt√© √† vos besoins"})]})}),s.jsxs(c,{defaultValue:"predictions",className:"space-y-6",children:[s.jsxs(d,{className:"grid w-full grid-cols-2 overflow-x-auto scrollbar-hide gap-1",children:[s.jsxs(o,{value:"predictions",className:"gap-2",children:[s.jsx(N,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Pr√©dictions"})]}),s.jsxs(o,{value:"plan",className:"gap-2",children:[s.jsx(f,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Plan d'√âtude"})]})]}),s.jsxs(x,{value:"predictions",className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(l,{className:"border-2 border-primary/30 shadow-lg",children:[s.jsx(r,{children:s.jsxs(i,{className:"flex items-center gap-2",children:[s.jsx(v,{className:"w-5 h-5"}),"üéØ Succ√®s aux Examens"]})}),s.jsxs(n,{children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsxs("div",{className:`text-6xl font-bold mb-2 bg-gradient-to-r ${Z=I.predictions.examSuccess.percentage,Z>=80?"from-green-500 to-emerald-600":Z>=60?"from-blue-500 to-indigo-600":Z>=40?"from-yellow-500 to-orange-600":"from-red-500 to-rose-600"} bg-clip-text text-transparent`,children:[I.predictions.examSuccess.percentage,"%"]}),s.jsx("p",{className:"text-sm text-slate-600",children:"Probabilit√© de succ√®s"})]}),s.jsx("div",{className:`p-3 rounded-lg border ${J(I.predictions.examSuccess.confidence).bg} mb-4`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium text-slate-700",children:"Confiance :"}),s.jsx("span",{className:`text-sm font-bold ${J(I.predictions.examSuccess.confidence).color}`,children:J(I.predictions.examSuccess.confidence).label})]})}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-semibold text-sm text-slate-700 mb-2",children:"Performance par niveau :"}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsxs("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200 text-center",children:[s.jsx("div",{className:"text-2xl mb-1",children:"üü¢"}),s.jsx("div",{className:"text-xs text-slate-600 mb-1",children:"Facile"}),s.jsxs("div",{className:"text-lg font-bold text-green-700",children:[(null==(F=null==(D=null==I?void 0:I.exams)?void 0:D.byDifficulty)?void 0:F.facile)||0,"%"]})]}),s.jsxs("div",{className:"p-3 bg-yellow-50 rounded-lg border border-yellow-200 text-center",children:[s.jsx("div",{className:"text-2xl mb-1",children:"üü°"}),s.jsx("div",{className:"text-xs text-slate-600 mb-1",children:"Moyen"}),s.jsxs("div",{className:"text-lg font-bold text-yellow-700",children:[(null==(M=null==(L=null==I?void 0:I.exams)?void 0:L.byDifficulty)?void 0:M.moyen)||0,"%"]})]}),s.jsxs("div",{className:"p-3 bg-red-50 rounded-lg border border-red-200 text-center",children:[s.jsx("div",{className:"text-2xl mb-1",children:"üî¥"}),s.jsx("div",{className:"text-xs text-slate-600 mb-1",children:"Difficile"}),s.jsxs("div",{className:"text-lg font-bold text-red-700",children:[(null==(z=null==(T=null==I?void 0:I.exams)?void 0:T.byDifficulty)?void 0:z.difficile)||0,"%"]})]})]})]})]})]}),s.jsxs(l,{className:"shadow-lg",children:[s.jsx(r,{children:s.jsxs(i,{className:"flex items-center gap-2",children:[s.jsx(y,{className:"w-5 h-5"}),"üèÜ Prochain Niveau"]})}),s.jsx(n,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-primary/10 to-blue-50 rounded-lg",children:[s.jsx("p",{className:"text-sm text-slate-600 mb-2",children:"Niveau actuel"}),s.jsx("div",{className:"text-3xl font-bold text-primary mb-1",children:I.predictions.nextLevel.currentLevel}),s.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-slate-600",children:[s.jsx("span",{children:"‚Üí"}),s.jsx("span",{className:"font-semibold text-primary",children:I.predictions.nextLevel.nextLevel})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm text-slate-600",children:"Progression"}),s.jsxs("span",{className:"text-sm font-bold text-primary",children:[Math.round(I.overall.totalPoints%100),"%"]})]}),s.jsx(m,{value:I.overall.totalPoints%100,className:"h-3"})]}),s.jsx("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:s.jsxs("p",{className:"text-sm text-blue-800 text-center",children:["‚≠ê ",s.jsxs("strong",{children:[I.predictions.nextLevel.pointsNeeded," points"]})," restants"]})}),s.jsx("div",{className:"p-3 bg-purple-50 rounded-lg border border-purple-200",children:s.jsxs("p",{className:"text-sm text-purple-800 text-center",children:["‚è±Ô∏è Environ ",s.jsxs("strong",{children:[I.predictions.nextLevel.daysEstimated," jours"]})," au rythme actuel"]})})]})})]})]}),s.jsxs(l,{className:"shadow-lg",children:[s.jsx(r,{children:s.jsxs(i,{className:"flex items-center gap-2",children:[s.jsx(f,{className:"w-5 h-5"}),"‚è≥ Temps pour Ma√Ætrise Compl√®te"]})}),s.jsx(n,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center p-6 bg-gradient-to-br from-primary/5 to-blue-50 rounded-lg",children:[s.jsxs("div",{className:"inline-flex items-baseline gap-2 mb-2",children:[s.jsx("span",{className:"text-5xl font-bold text-primary",children:I.predictions.timeToMastery.hoursNeeded}),s.jsx("span",{className:"text-xl text-slate-600",children:"heures"})]}),s.jsx("p",{className:"text-sm text-slate-600",children:"de r√©vision restantes"})]}),s.jsx("div",{className:"p-6 bg-purple-50 rounded-lg border border-purple-200 flex flex-col justify-center",children:s.jsxs("p",{className:"text-sm text-purple-800 text-center",children:["üìö ",s.jsxs("strong",{children:[I.predictions.timeToMastery.remainingChapters," chapitres"]})," √† compl√©ter"]})}),s.jsx("div",{className:"p-6 bg-green-50 rounded-lg border border-green-200 flex flex-col justify-center",children:s.jsxs("p",{className:"text-sm text-green-800 text-center",children:["üéØ Objectif : ",s.jsxs("strong",{children:[I.predictions.timeToMastery.daysNeeded," jours"]})," (1h/jour)"]})})]})})]}),I.predictions.riskAreas.length>0&&s.jsxs(l,{className:"border-2 border-red-200 bg-red-50/30 shadow-lg",children:[s.jsx(r,{children:s.jsxs(i,{className:"flex items-center gap-2 text-red-700",children:[s.jsx(u,{className:"w-5 h-5"}),"üö® Zones d'Attention Prioritaires"]})}),s.jsx(n,{children:s.jsx("div",{className:"space-y-3",children:I.predictions.riskAreas.map((e,a)=>s.jsxs(g.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*a},className:"p-4 bg-white rounded-lg border-l-4 border-l-red-500 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"font-semibold text-red-900",children:e.title}),s.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("high"===e.severity?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"),children:"high"===e.severity?"üî¥ Urgent":"üü° Attention"})]}),s.jsx("p",{className:"text-sm text-slate-600 mb-3",children:e.message}),s.jsxs(t,{size:"sm",variant:"outline",onClick:()=>B("no_practice"===e.type?"exam":"unstarted_subjects"===e.type?"subject":"course"),className:"gap-2",children:[s.jsx(w,{className:"w-4 h-4"}),e.action]})]},a))})})]})]}),s.jsxs(x,{value:"plan",className:"space-y-6",children:[s.jsxs(l,{className:"border-2 border-primary/30 bg-gradient-to-br from-primary/5 to-blue-50 shadow-lg",children:[s.jsx(r,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(i,{className:"flex items-center gap-2",children:[s.jsx(f,{className:"w-5 h-5"}),"üìã ",U.title]}),s.jsxs(t,{size:"sm",variant:"outline",className:"gap-2",children:[s.jsx(P,{className:"w-4 h-4"}),"T√©l√©charger PDF"]})]})}),s.jsxs(n,{children:[s.jsx("div",{className:"mb-6 p-4 bg-white rounded-lg shadow-sm",children:s.jsxs("div",{className:"flex flex-wrap gap-4 justify-between",children:[s.jsxs("p",{className:"text-sm text-slate-600",children:["‚è±Ô∏è ",s.jsxs("strong",{children:[U.hoursPerDay,"h/jour"]})," recommand√©es"]}),s.jsxs("p",{className:"text-sm text-slate-600",children:["üìÖ Plan g√©n√©r√© le ",new Date(U.generatedAt).toLocaleDateString("fr-FR")]})]})}),s.jsxs("div",{className:"space-y-3 mb-6",children:[s.jsxs("h3",{className:"font-semibold text-lg text-slate-800 mb-3 flex items-center gap-2",children:[s.jsx(f,{className:"w-5 h-5"}),"üìÖ Planning de la Semaine"]}),U.schedule.map((e,a)=>s.jsxs(g.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*a},className:"p-4 bg-white rounded-lg shadow-sm border border-slate-200 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 text-primary font-bold flex items-center justify-center",children:a+1}),s.jsx("h4",{className:"font-semibold text-slate-800",children:e.day})]}),s.jsx("div",{className:"space-y-2 ml-13",children:e.sessions.map((e,a)=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-50 rounded hover:bg-slate-100 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(C,{className:"w-4 h-4 text-slate-400"}),s.jsx("span",{className:"text-sm font-medium text-slate-700",children:e.time}),s.jsx("span",{className:"text-sm text-slate-600",children:e.subject})]}),s.jsx("span",{className:"text-xs text-slate-500 bg-white px-2 py-1 rounded",children:e.activity})]},a))})]},a))]}),U.priorities.length>0&&s.jsxs("div",{className:"mb-6",children:[s.jsxs("h3",{className:"font-semibold text-lg text-slate-800 mb-3 flex items-center gap-2",children:[s.jsx(v,{className:"w-5 h-5"}),"üéØ Priorit√©s d'Apprentissage"]}),s.jsx("div",{className:"space-y-2",children:U.priorities.map((e,a)=>s.jsxs(g.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1*a},className:"p-3 bg-white rounded-lg border-l-4 border-l-orange-500 shadow-sm hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"font-medium text-slate-800",children:e.area}),s.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+("high"===e.priority?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"),children:"high"===e.priority?"üî¥ Prioritaire":"üü° Important"})]}),s.jsx("ul",{className:"space-y-1",children:e.recommendations.map((e,a)=>s.jsxs("li",{className:"text-xs text-slate-600 flex items-start gap-2",children:[s.jsx(S,{className:"w-3 h-3 flex-shrink-0 mt-0.5 text-orange-500"}),s.jsx("span",{children:e})]},a))})]},a))})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-lg text-slate-800 mb-3 flex items-center gap-2",children:[s.jsx(b,{className:"w-5 h-5"}),"üí° Conseils Personnalis√©s"]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:U.tips.map((e,a)=>s.jsx(g.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.05*a},className:"p-3 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg border border-blue-200 hover:shadow-md transition-shadow",children:s.jsx("p",{className:"text-sm text-slate-700",children:e})},a))})]})]})]}),s.jsxs(l,{className:"shadow-lg",children:[s.jsx(r,{children:s.jsxs(i,{className:"flex items-center gap-2",children:[s.jsx(v,{className:"w-5 h-5"}),"‚ö° Actions Recommand√©es"]})}),s.jsx(n,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs(t,{onClick:()=>B("course"),className:"h-auto py-4 flex-col gap-2 bg-gradient-to-r from-primary to-blue-600 hover:shadow-lg transition-shadow",children:[s.jsx(A,{className:"w-6 h-6"}),s.jsx("span",{children:"Commencer un cours"})]}),s.jsxs(t,{onClick:()=>B("exam"),variant:"outline",className:"h-auto py-4 flex-col gap-2 hover:shadow-lg transition-shadow",children:[s.jsx(v,{className:"w-6 h-6"}),s.jsx("span",{children:"Passer un examen"})]}),s.jsxs(t,{onClick:()=>R("/progress"),variant:"outline",className:"h-auto py-4 flex-col gap-2 hover:shadow-lg transition-shadow",children:[s.jsx(k,{className:"w-6 h-6"}),s.jsx("span",{children:"Voir ma progression"})]})]})})]})]})]})]})})]}):s.jsxs(s.Fragment,{children:[s.jsx(h,{}),s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 pt-20",children:s.jsx("div",{className:"flex items-center justify-center h-96",children:s.jsxs("div",{className:"text-center",children:[s.jsx(u,{className:"w-16 h-16 text-yellow-500 mx-auto mb-4"}),s.jsx("p",{className:"text-slate-600 mb-4",children:"Impossible de charger vos donn√©es"}),s.jsx(t,{onClick:q,children:"R√©essayer"})]})})})]});var Z};export{D as default};
