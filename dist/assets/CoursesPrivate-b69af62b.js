import{r as e,j as s}from"./vendor-react-470eca1f.js";import{H as a}from"./Helmet-2c7e73f6.js";import{N as t}from"./Navbar-fef78110.js";import{u as l,C as i,a as r,B as n,b as c,f as o,c as d,i as m}from"./index-80385b81.js";import{I as x}from"./input-5c98a0d4.js";import{T as u,a as h,b as p,c as j}from"./tabs-04421a9d.js";import{A as f,a as g,b as v,c as b}from"./accordion-6dd88918.js";import{c as N}from"./vendor-router-da2b77bd.js";import{m as y}from"./vendor-charts-0ffd78b1.js";import{z as w,aN as C,a7 as k,n as _,aO as S,c as A,aL as z,aB as B,b as E,aF as F,r as I,aM as P}from"./vendor-ui-297a683c.js";import"./vendor-supabase-1d8f37f5.js";const V={"MathÃ©matiques":z,"Physique-Chimie":B,SVT:E,"FranÃ§ais":F,"Histoire-GÃ©ographie":I,Anglais:A,Philosophie:P,default:A},q=()=>{const z=N(),{user:B,toast:E}=l(),[F,I]=e.useState(""),[P,q]=e.useState("bfem"),[M,L]=e.useState([]),[$,D]=e.useState({}),[T,H]=e.useState({}),[R,O]=e.useState({}),[U,G]=e.useState({}),[Q,J]=e.useState(!0),[K,W]=e.useState([]);e.useEffect(()=>{(async()=>{J(!0);try{const{data:e,error:s}=await m.course.getMatieresByLevel(P);if(s)throw s;L(e||[]);const a=null==e?void 0:e.map(async e=>{const s=await m.course.getAnnales(e.id);return{matiereId:e.id,annales:s.data||[]}}),t=await Promise.all(a||[]),l={};t.forEach(({matiereId:e,annales:s})=>{l[e]=s}),D(l);const i=null==e?void 0:e.map(async e=>{const s=await m.course.getExamens(e.id);return{matiereId:e.id,examens:s.data||[]}}),r=await Promise.all(i||[]),n={};r.forEach(({matiereId:e,examens:s})=>{n[e]=s}),H(n);const c={},o={};for(const d of e||[])for(const e of d.chapitres||[]){const s=await m.course.getFichesRevision(e.id);c[e.id]=s.data||[];const a=await m.quiz.getQuizzesByChapitre(e.id);a.data&&a.data.length>0&&(o[e.id]=a.data[0])}if(O(c),G(o),B){const{data:e}=await m.progress.getUserProgress(B.id);W(e||[])}}catch(e){E({title:"Erreur de chargement",description:"Impossible de charger les cours. Veuillez rÃ©essayer.",variant:"destructive"})}finally{J(!1)}})()},[P,B]);const X=e=>{e.pdf_url?window.open(e.pdf_url,"_blank"):E({title:"Document non disponible",description:"Ce document sera bientÃ´t disponible."})},Y=e=>{e.correction_video_url?window.open(e.correction_video_url,"_blank"):E({title:"VidÃ©o non disponible",description:"Cette vidÃ©o sera bientÃ´t disponible."})},Z=M.filter(e=>e.name.toLowerCase().includes(F.toLowerCase())),ee=e=>K.some(s=>s.lecon_id===e);return Q?s.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-300",children:"Chargement des cours..."})]})}):s.jsxs(s.Fragment,{children:[s.jsxs(a,{children:[s.jsx("title",{children:"Nos Cours - BFEM et BAC SÃ©nÃ©gal, CÃ´te d'Ivoire"}),s.jsx("meta",{name:"description",content:"DÃ©couvrez nos cours en ligne pour le BFEM et le BaccalaurÃ©at. Programmes complets avec professeurs experts pour le SÃ©nÃ©gal, la CÃ´te d'Ivoire et l'Afrique francophone."}),s.jsx("meta",{name:"keywords",content:"cours en ligne, rÃ©visions BFEM SÃ©nÃ©gal, prÃ©paration BAC CÃ´te d'Ivoire, e-learning Afrique"})]}),s.jsxs("div",{className:"min-h-screen bg-white dark:bg-slate-900",children:[s.jsx(t,{}),s.jsx("section",{className:"pt-32 pb-20 px-4 bg-gradient-to-br from-slate-50 via-blue-50 to-purple-50 dark:from-slate-800 dark:via-slate-900 dark:to-slate-900",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-12",children:[s.jsxs("h1",{className:"text-5xl md:text-6xl font-bold font-heading text-slate-900 dark:text-white mb-6",children:["Nos ",s.jsx("span",{className:"text-primary dark:text-blue-400",children:"Parcours"})]}),s.jsx("p",{className:"text-xl text-slate-600 dark:text-slate-300 max-w-3xl mx-auto",children:"Un catalogue de cours rigoureux pour une prÃ©paration d'excellence, du collÃ¨ge au lycÃ©e."})]}),s.jsxs(u,{value:P,onValueChange:q,className:"w-full",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4 mb-8",children:[s.jsxs(h,{children:[s.jsx(p,{value:"bfem",children:"CollÃ¨ge (BFEM)"}),s.jsx(p,{value:"bac",children:"LycÃ©e (BaccalaurÃ©at)"})]}),s.jsxs("div",{className:"relative w-full sm:w-auto sm:max-w-xs",children:[s.jsx(w,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-slate-400"}),s.jsx(x,{type:"text",placeholder:"Rechercher une matiÃ¨re...",className:"pl-10",value:F,onChange:e=>I(e.target.value)})]})]}),s.jsx(j,{value:P,children:0===Z.length?s.jsx("p",{className:"text-center text-slate-500 py-12",children:0===M.length?"Aucun cours disponible pour ce niveau. Revenez bientÃ´t !":"Aucun cours ne correspond Ã  votre recherche."}):s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:Z.map((e,a)=>{var t,l,m,x,u,h,p,j,N;const w=(F=e.name,V[F]||V.default);var F;const I=(null==(t=e.chapitres)?void 0:t.reduce((e,s)=>{var a;return e+((null==(a=s.lecons)?void 0:a.length)||0)},0))||0,P=(null==(l=e.chapitres)?void 0:l.reduce((e,s)=>{var a;return e+((null==(a=s.lecons)?void 0:a.filter(e=>e.is_free_preview).length)||0)},0))||0;return s.jsx(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.05*a},className:"flex",children:s.jsxs(i,{className:"hover-lift h-full flex flex-col w-full dark:bg-slate-800 dark:border-white/20 border-2 shadow-lg dark:shadow-[0_0_30px_rgba(255,255,255,0.4)] dark:hover:shadow-[0_0_35px_rgba(255,255,255,0.5)] transition-all duration-300",children:[s.jsxs(r,{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-lg bg-primary/10 flex items-center justify-center",children:s.jsx(w,{className:"w-6 h-6 text-primary"})}),s.jsxs("div",{className:"flex items-center gap-3",children:[P>0&&s.jsxs("div",{className:"flex items-center gap-1 text-green-600",children:[s.jsx(C,{size:14}),s.jsxs("span",{className:"text-sm font-semibold",children:[P," gratuit",P>1?"s":""]})]}),s.jsx(n,{variant:"ghost",size:"icon",onClick:()=>(e=>{E({title:`TÃ©lÃ©chargement de "${e.name}"`,description:"La fonctionnalitÃ© de tÃ©lÃ©chargement hors-ligne sera bientÃ´t disponible. ðŸš€"})})(e),children:s.jsx(k,{className:"w-5 h-5 text-slate-500"})})]})]}),s.jsx(c,{className:"text-xl",children:e.name}),s.jsxs(o,{children:[(null==(m=e.chapitres)?void 0:m.length)||0," chapitres â€¢ ",I," leÃ§ons"]})]}),s.jsxs(d,{className:"flex-grow flex flex-col justify-end",children:[s.jsxs(f,{type:"single",collapsible:!0,className:"w-full",children:[s.jsxs(g,{value:"annales",children:[s.jsxs(v,{children:["Annales CorrigÃ©es (",(null==(x=$[e.id])?void 0:x.length)||0,")"]}),s.jsx(b,{children:s.jsx("ul",{className:"space-y-2",children:(null==(u=$[e.id])?void 0:u.length)>0?$[e.id].map(e=>s.jsxs("li",{className:"flex justify-between items-center text-sm p-2 rounded-md hover:bg-slate-100",children:[s.jsx("span",{children:e.title}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(_,{className:"w-4 h-4 text-primary cursor-pointer",onClick:()=>X(e),title:"Voir le PDF"}),e.correction_video_url&&s.jsx(S,{className:"w-4 h-4 text-accent cursor-pointer",onClick:()=>Y(e),title:"Voir la vidÃ©o"})]})]},e.id)):s.jsx("p",{className:"text-xs text-slate-400",children:"Aucune annale disponible pour le moment."})})})]}),s.jsxs(g,{value:"examens",children:[s.jsxs(v,{children:["Examens CorrigÃ©s (",(null==(h=T[e.id])?void 0:h.length)||0,")"]}),s.jsx(b,{children:s.jsx("ul",{className:"space-y-2",children:(null==(p=T[e.id])?void 0:p.length)>0?T[e.id].map(e=>s.jsxs("li",{className:"flex justify-between items-center text-sm p-2 rounded-md hover:bg-slate-100 border border-slate-200",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-100",children:e.title}),s.jsxs("div",{className:"flex gap-2 items-center mt-1",children:[s.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-primary/10 text-primary",children:"blanc"===e.type?"Examen blanc":"entrainement"===e.type?"EntraÃ®nement":"Officiel"}),s.jsxs("span",{className:"text-xs text-slate-500",children:[e.duration_minutes," min"]}),e.difficulty&&s.jsx("span",{className:"text-xs px-2 py-0.5 rounded "+("facile"===e.difficulty?"bg-green-100 text-green-700":"moyen"===e.difficulty?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"),children:e.difficulty})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(_,{className:"w-4 h-4 text-primary cursor-pointer",onClick:()=>X(e),title:"Voir le PDF"}),e.correction_video_url&&s.jsx(S,{className:"w-4 h-4 text-accent cursor-pointer",onClick:()=>Y(e),title:"Voir la vidÃ©o de correction"})]})]},e.id)):s.jsx("p",{className:"text-xs text-slate-400",children:"Aucun examen disponible pour le moment."})})})]}),s.jsxs(g,{value:"chapitres",children:[s.jsxs(v,{children:["Chapitres (",(null==(j=e.chapitres)?void 0:j.length)||0,")"]}),s.jsx(b,{children:s.jsx("ul",{className:"space-y-2",children:(null==(N=e.chapitres)?void 0:N.length)>0?e.chapitres.map(e=>{var a,t,l,i;return s.jsxs("li",{className:"text-sm p-3 rounded-md hover:bg-slate-100 border border-slate-200",children:[s.jsx("div",{className:"font-medium text-slate-800 dark:text-slate-100",children:e.title}),s.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:[(null==(a=e.lecons)?void 0:a.length)||0," leÃ§on",(null==(t=e.lecons)?void 0:t.length)>1?"s":"",(null==(l=R[e.id])?void 0:l.length)>0&&` â€¢ ${R[e.id].length} fiche${R[e.id].length>1?"s":""}`]}),B&&(null==(i=e.lecons)?void 0:i.length)>0&&s.jsx("div",{className:"mt-2",children:s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx("div",{className:"flex-1 bg-slate-200 rounded-full h-1.5",children:s.jsx("div",{className:"bg-green-500 h-1.5 rounded-full",style:{width:e.lecons.filter(e=>ee(e.id)).length/e.lecons.length*100+"%"}})}),s.jsxs("span",{className:"text-slate-500",children:[e.lecons.filter(e=>ee(e.id)).length,"/",e.lecons.length]})]})}),U[e.id]&&s.jsx(n,{size:"sm",onClick:()=>window.location.href=`/quiz/${U[e.id].id}`,className:"mt-3 w-full bg-primary hover:bg-primary/90",children:"ðŸŽ¯ Faire le quiz"})]},e.id)}):s.jsx("p",{className:"text-xs text-slate-400",children:"Aucun chapitre disponible."})})})]})]}),s.jsxs(n,{onClick:()=>z(`/course/${e.id}`),className:"w-full bg-accent text-white hover:bg-accent/90 mt-4",children:[s.jsx(A,{className:"w-4 h-4 mr-2"}),"Commencer le cours"]})]})]})},e.id)})})})]})]})})]})]})};export{q as default};
