import{j as e,r as s}from"./vendor-react-470eca1f.js";import{o as t,p as a,h as l,s as r,e as n,C as i,a as o,b as d,c,B as m}from"./index-80385b81.js";import"./progress-d9418a6f.js";import{f as x,ao as p,e as g,g as h,aJ as u,aI as b,aq as j,aa as f,J as v}from"./vendor-ui-297a683c.js";import{f as _}from"./format-89148104.js";import{u as y}from"./use-toast-e1db9400.js";import{R as N,L as w,C as k,X as C,Y as D,T as S,d as E,P as z,e as M,f as $,g as q,B as R,h as P}from"./vendor-charts-0ffd78b1.js";import{c as T}from"./vendor-router-da2b77bd.js";import"./vendor-supabase-1d8f37f5.js";function F(e,s,l){return function(e,s,l){const r=t(e,null==l?void 0:l.in);return isNaN(s)?a((null==l?void 0:l.in)||e,NaN):s?(r.setDate(r.getDate()+s),r):r}(e,-s,l)}function L({stats:s}){var t;const a=[{icon:x,label:"Points totaux",value:(null==(t=null==s?void 0:s.total_points)?void 0:t.toLocaleString("fr-FR"))||"0",color:"text-yellow-600",bgColor:"bg-yellow-50",iconBg:"bg-yellow-100"},{icon:p,label:"Niveau",value:(null==s?void 0:s.level)||"1",color:"text-purple-600",bgColor:"bg-purple-50",iconBg:"bg-purple-100"},{icon:g,label:"SÃ©rie actuelle",value:`${(null==s?void 0:s.current_streak)||0} jours`,color:"text-orange-600",bgColor:"bg-orange-50",iconBg:"bg-orange-100"},{icon:h,label:"LeÃ§ons complÃ©tÃ©es",value:(null==s?void 0:s.lessons_completed)||"0",color:"text-blue-600",bgColor:"bg-blue-50",iconBg:"bg-blue-100"}];return e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:a.map((s,t)=>{const a=s.icon;return e.jsx("div",{className:`${s.bgColor} rounded-xl p-6 shadow-sm hover:shadow-md transition-shadow`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:s.label}),e.jsx("p",{className:`text-2xl font-bold ${s.color}`,children:s.value})]}),e.jsx("div",{className:`${s.iconBg} p-3 rounded-lg`,children:e.jsx(a,{className:`w-6 h-6 ${s.color}`})})]})},t)})})}function A({badges:s}){const t=[{badge_name:"Apprenant Assidu",badge_icon:"ðŸŽ“",badge_description:"ComplÃ©tez 10 leÃ§ons",badge_type:"progression"},{badge_name:"Finisseur",badge_icon:"ðŸ“š",badge_description:"ComplÃ©tez 5 chapitres",badge_type:"progression"},{badge_name:"MaÃ®tre de cours",badge_icon:"ðŸŒŸ",badge_description:"ComplÃ©tez un cours entier",badge_type:"progression"},{badge_name:"Expert",badge_icon:"ðŸš€",badge_description:"ComplÃ©tez 3 cours",badge_type:"progression"},{badge_name:"SÃ©rie d'apprentissage",badge_icon:"ðŸ”¥",badge_description:"Apprenez pendant 7 jours consÃ©cutifs",badge_type:"streak"}],a=t.map(e=>{const t=s.find(s=>s.badge_name===e.badge_name);return{...e,earned:!!t,earned_at:null==t?void 0:t.earned_at,id:null==t?void 0:t.id}});return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"ðŸ… Badges"}),e.jsxs("span",{className:"text-sm text-gray-600",children:[s.length,"/",t.length]})]}),e.jsx("div",{className:"space-y-4",children:a.map((s,t)=>e.jsx("div",{className:"p-4 rounded-lg border-2 transition-all "+(s.earned?"bg-gradient-to-r from-purple-50 to-blue-50 border-purple-200 shadow-sm":"bg-gray-50 border-gray-200 opacity-60"),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-4xl "+(s.earned?"":"grayscale opacity-50"),children:s.earned?s.badge_icon:e.jsx(u,{className:"w-8 h-8 text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold "+(s.earned?"text-gray-900":"text-gray-500"),children:s.badge_name}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:s.badge_description}),s.earned&&s.earned_at&&e.jsxs("p",{className:"text-xs text-purple-600 mt-2",children:["âœ“ DÃ©bloquÃ© le ",_(new Date(s.earned_at),"dd MMM yyyy",{locale:l})]})]})]})},t))}),0===s.length&&e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"ComplÃ©tez des leÃ§ons pour dÃ©bloquer vos premiers badges ! ðŸŽ¯"})})]})}function B({challenge:t,userId:a,onComplete:l}){const[n,i]=s.useState(!1),{toast:o}=y(),d=t.user_learning_challenges[0],c=(null==d?void 0:d.current_progress)||0,m=t.target_value,x=(null==d?void 0:d.is_completed)||!1,p=(null==d?void 0:d.reward_claimed)||!1,g=Math.min(c/m*100,100);return e.jsxs("div",{className:"p-4 rounded-lg border-2 transition-all "+(x&&!p?"bg-green-50 border-green-300 shadow-md":p?"bg-gray-50 border-gray-200":"bg-white border-gray-200"),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-3xl",children:t.icon}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[t.name,p&&e.jsx(b,{className:"w-4 h-4 text-green-600"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t.description})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"flex items-center gap-1 text-sm font-semibold text-purple-600",children:[e.jsx(j,{className:"w-4 h-4"}),t.reward_points," pts"]})})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-gray-600",children:"Progression"}),e.jsxs("span",{className:"font-semibold "+(x?"text-green-600":"text-gray-900"),children:[c," / ",m]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 overflow-hidden",children:e.jsx("div",{className:"h-2.5 rounded-full transition-all duration-500 "+(x?"bg-green-500":"bg-purple-600"),style:{width:`${g}%`}})})]}),x&&!p&&e.jsx("button",{onClick:async()=>{try{i(!0);const{data:e,error:s}=await r.rpc("complete_learning_challenge",{p_user_id:a,p_challenge_id:t.id});if(s)throw s;o({title:"ðŸŽ‰ RÃ©compense rÃ©clamÃ©e !",description:`+${t.reward_points} points ajoutÃ©s Ã  votre total`,duration:5e3}),l&&l()}catch(e){o({title:"Erreur",description:e.message||"Impossible de rÃ©clamer la rÃ©compense",variant:"destructive",duration:5e3})}finally{i(!1)}},disabled:n,className:"w-full mt-2 bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:n?e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"w-4 h-4 animate-spin"}),"RÃ©clamation..."]}):e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"w-4 h-4"}),"RÃ©clamer ",t.reward_points," points"]})}),p&&e.jsx("div",{className:"mt-2 text-center text-sm text-green-600 font-semibold",children:"âœ“ RÃ©compense rÃ©clamÃ©e"})]})}function U({challenges:s,userId:t,onChallengeComplete:a}){const l=s.filter(e=>{var s,t;return(null==(s=e.user_learning_challenges[0])?void 0:s.is_completed)&&!(null==(t=e.user_learning_challenges[0])?void 0:t.reward_claimed)}),r=l.reduce((e,s)=>e+s.reward_points,0);return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"ðŸŽ¯ DÃ©fis de la semaine"}),l.length>0&&e.jsxs("div",{className:"bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm font-semibold",children:["+",r," pts Ã  rÃ©clamer"]})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[l.length," dÃ©fi",l.length>1?"s":""," complÃ©tÃ©",l.length>1?"s":""]})]}),e.jsx("div",{className:"space-y-4",children:0===s.length?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500",children:"Aucun dÃ©fi actif cette semaine. Revenez lundi ! ðŸ“…"})}):s.map(s=>e.jsx(B,{challenge:s,userId:t,onComplete:a},s.id))}),s.length>0&&e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("p",{className:"font-semibold mb-2",children:"ðŸ’¡ Comment fonctionnent les dÃ©fis ?"}),e.jsxs("ul",{className:"space-y-1 ml-4",children:[e.jsx("li",{children:"â€¢ Les dÃ©fis se renouvellent chaque semaine (lundi)"}),e.jsx("li",{children:"â€¢ Votre progression est mise Ã  jour automatiquement"}),e.jsx("li",{children:"â€¢ RÃ©clamez vos rÃ©compenses aprÃ¨s complÃ©tion"}),e.jsx("li",{children:"â€¢ Les points sont ajoutÃ©s Ã  votre total immÃ©diatement"})]})]})})]})}function I({pointsHistory:t,stats:a}){const r=s.useMemo(()=>{const e=Array.from({length:7},(e,s)=>{const t=F(new Date,6-s);return{date:_(t,"EEE",{locale:l}),fullDate:_(t,"yyyy-MM-dd"),points:0}});return t.forEach(s=>{const t=_(new Date(s.created_at),"yyyy-MM-dd"),a=e.find(e=>e.fullDate===t);a&&(a.points+=s.points_earned)}),e},[t]),n=s.useMemo(()=>{const e={lesson_completed:0,chapter_completed:0,course_completed:0,challenge_completed:0};return t.forEach(s=>{e.hasOwnProperty(s.action_type)&&(e[s.action_type]+=s.points_earned)}),[{name:"LeÃ§ons",value:e.lesson_completed,color:"#8b5cf6"},{name:"Chapitres",value:e.chapter_completed,color:"#3b82f6"},{name:"Cours",value:e.course_completed,color:"#10b981"},{name:"DÃ©fis",value:e.challenge_completed,color:"#f59e0b"}].filter(e=>e.value>0)},[t]),i=s.useMemo(()=>[{label:"LeÃ§ons",value:(null==a?void 0:a.lessons_completed)||0,max:100,color:"#8b5cf6"},{label:"Chapitres",value:(null==a?void 0:a.chapters_completed)||0,max:20,color:"#3b82f6"},{label:"Cours",value:(null==a?void 0:a.courses_completed)||0,max:5,color:"#10b981"}],[a]);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"ðŸ“ˆ Points gagnÃ©s (7 derniers jours)"}),e.jsx(N,{width:"100%",height:250,children:e.jsxs(w,{data:r,children:[e.jsx(k,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(C,{dataKey:"date",stroke:"#6b7280",style:{fontSize:"12px"}}),e.jsx(D,{stroke:"#6b7280",style:{fontSize:"12px"}}),e.jsx(S,{contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px"},formatter:e=>[`${e} points`,"Points gagnÃ©s"]}),e.jsx(E,{type:"monotone",dataKey:"points",stroke:"#8b5cf6",strokeWidth:3,dot:{fill:"#8b5cf6",r:4},activeDot:{r:6}})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"ðŸŽ¯ RÃ©partition des points"}),n.length>0?e.jsx(N,{width:"100%",height:250,children:e.jsxs(z,{children:[e.jsx(M,{data:n,cx:"50%",cy:"50%",labelLine:!1,label:({name:e,percent:s})=>`${e} ${(100*s).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:n.map((s,t)=>e.jsx($,{fill:s.color},`cell-${t}`))}),e.jsx(S,{formatter:e=>[`${e} points`,"Points"]}),e.jsx(q,{})]})}):e.jsx("div",{className:"flex items-center justify-center h-[250px] text-gray-500",children:"ComplÃ©tez des leÃ§ons pour voir vos statistiques"})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"ðŸ“Š Progression globale"}),e.jsx(N,{width:"100%",height:250,children:e.jsxs(R,{data:i,layout:"vertical",children:[e.jsx(k,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(C,{type:"number",stroke:"#6b7280",style:{fontSize:"12px"}}),e.jsx(D,{type:"category",dataKey:"label",stroke:"#6b7280",style:{fontSize:"12px"}}),e.jsx(S,{contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px"},formatter:e=>[`${e}`,"ComplÃ©tÃ©"]}),e.jsx(P,{dataKey:"value",radius:[0,8,8,0],children:i.map((s,t)=>e.jsx($,{fill:s.color},`cell-${t}`))})]})})]})]})]})}function K(){const{user:t}=n(),a=T(),[l,x]=s.useState(!0),[g,u]=s.useState(null),[b,j]=s.useState(null),[_,y]=s.useState([]),[N,w]=s.useState([]),[k,C]=s.useState([]),[D,S]=s.useState(null),[E,z]=s.useState([]);s.useEffect(()=>{t&&M()},[t]);const M=async()=>{try{x(!0),u(null);const{data:e,error:s}=await r.from("user_points").select("total_points, level, current_streak, lessons_completed, chapters_completed, courses_completed").eq("user_id",t.id).single();if(s)throw s;const{data:a,error:l}=await r.from("user_badges").select("*").eq("user_id",t.id).order("earned_at",{ascending:!1});if(l)throw l;const n=$(new Date),i=(new Date).getFullYear(),{data:o,error:d}=await r.from("learning_challenges").select("\n          id,\n          name,\n          description,\n          icon,\n          challenge_type,\n          target_value,\n          reward_points,\n          user_learning_challenges!inner (\n            current_progress,\n            target_value,\n            is_completed,\n            reward_claimed,\n            completed_at\n          )\n        ").eq("week_number",n).eq("year",i).eq("user_learning_challenges.user_id",t.id);if(d)throw d;const{data:c,error:m}=await r.from("user_points_history").select("action_type, points_earned, created_at, action_details").eq("user_id",t.id).order("created_at",{ascending:!1}).limit(50);if(m)throw m;const{data:p,error:g}=await r.from("exam_results").select("\n          id,\n          score,\n          time_taken,\n          completed_at,\n          examens (\n            id,\n            title,\n            type,\n            difficulty,\n            duration_minutes\n          )\n        ").eq("user_id",t.id).order("completed_at",{ascending:!1});if(g)throw g;const h=(null==p?void 0:p.length)||0,b=h>0?Math.round(p.reduce((e,s)=>e+s.score,0)/h):0,f=h>0?Math.max(...p.map(e=>e.score)):0,v=(null==p?void 0:p.reduce((e,s)=>e+(s.time_taken||0),0))||0;S({totalExams:h,avgExamScore:b,bestExamScore:f,totalExamTime:v}),z((null==p?void 0:p.slice(0,10))||[]),j(e||{total_points:0,level:1,current_streak:0,lessons_completed:0,chapters_completed:0,courses_completed:0}),y(a||[]),w(o||[]),C(c||[])}catch(e){u(e.message)}finally{x(!1)}},$=e=>{const s=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())),t=s.getUTCDay()||7;s.setUTCDate(s.getUTCDate()+4-t);const a=new Date(Date.UTC(s.getUTCFullYear(),0,1));return Math.ceil(((s-a)/864e5+1)/7)};return l?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(f,{className:"w-8 h-8 animate-spin text-purple-600"})}):g?e.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("p",{className:"text-red-800",children:["Erreur : ",g]})})}):e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"ðŸ“Š Tableau de progression"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Suivez vos performances, badges et dÃ©fis en temps rÃ©el"})]}),e.jsx(L,{stats:b}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mt-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx(A,{badges:_})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsx(U,{challenges:N,userId:t.id,onChallengeComplete:async()=>{await M()}})})]}),e.jsx("div",{className:"mt-8",children:e.jsx(I,{pointsHistory:k,stats:b})}),e.jsx("div",{className:"mt-8",children:e.jsxs(i,{className:"border-2 border-primary/20 dark:bg-slate-800 dark:border-white/30 shadow-xl dark:shadow-[0_0_35px_rgba(255,255,255,0.5)]",children:[e.jsx(o,{children:e.jsxs(d,{className:"flex items-center gap-2 dark:text-white",children:[e.jsx(v,{className:"w-5 h-5 text-primary"}),"ðŸ“… Timeline ComplÃ¨te de Progression"]})}),e.jsx(c,{children:k&&k.length>0?e.jsx("div",{className:"space-y-4",children:k.map((s,t)=>{const a=new Date(s.created_at);return e.jsxs("div",{className:"flex items-start gap-4 relative",children:[t<k.length-1&&e.jsx("div",{className:"absolute left-5 top-12 w-0.5 h-full bg-slate-200 dark:bg-slate-700"}),e.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full bg-gradient-to-br ${{quiz_completed:"from-blue-500 to-cyan-500",lesson_completed:"from-green-500 to-emerald-500",chapter_completed:"from-purple-500 to-pink-500",badge_earned:"from-yellow-500 to-orange-500",challenge_completed:"from-red-500 to-rose-500",exam_completed:"from-indigo-500 to-violet-500",streak_bonus:"from-orange-500 to-red-500"}[s.action_type]||"from-slate-400 to-slate-500"} flex items-center justify-center text-white text-lg z-10`,children:{quiz_completed:"ðŸŽ¯",lesson_completed:"ðŸ“–",chapter_completed:"âœ…",badge_earned:"ðŸ†",challenge_completed:"ðŸ’ª",exam_completed:"ðŸ“",streak_bonus:"ðŸ”¥"}[s.action_type]||"ðŸ“Œ"}),e.jsx("div",{className:"flex-1 pb-8",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"font-semibold text-slate-800 dark:text-slate-100",children:s.action_type.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())}),e.jsxs("span",{className:"text-sm font-bold text-green-600 dark:text-green-400",children:["+",s.points_earned," pts"]})]}),s.action_details&&e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:"string"==typeof s.action_details?s.action_details:s.action_details.title||s.action_details.name||"DÃ©tails non disponibles"}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-slate-500 dark:text-slate-400",children:[e.jsx(v,{className:"w-3 h-3"}),e.jsx("span",{children:a.toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})})})]},t)})}):e.jsxs("div",{className:"text-center py-12 text-slate-500",children:[e.jsx(p,{className:"w-16 h-16 mx-auto mb-3 opacity-30"}),e.jsx("p",{className:"text-lg",children:"Aucune activitÃ© enregistrÃ©e"}),e.jsx("p",{className:"text-sm mt-2",children:"ComplÃ©tez des quiz et leÃ§ons pour voir votre timeline !"})]})})]})}),D&&D.totalExams>0&&e.jsx("div",{className:"mt-8",children:e.jsxs(i,{className:"border-2 border-primary/20 dark:bg-slate-800 dark:border-white/30 shadow-xl dark:shadow-[0_0_35px_rgba(255,255,255,0.5)]",children:[e.jsx(o,{children:e.jsxs(d,{className:"flex items-center gap-2 dark:text-white",children:[e.jsx(h,{className:"w-5 h-5 text-primary"}),"ðŸ“ Performance aux Examens"]})}),e.jsxs(c,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg",children:[e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:D.totalExams}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:"Examens passÃ©s"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-green-50 to-green-100 rounded-lg",children:[e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:[D.avgExamScore,"%"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:"Score moyen"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-lg",children:[e.jsxs("p",{className:"text-3xl font-bold text-yellow-600",children:[D.bestExamScore,"%"]}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:"Meilleur score"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg",children:[e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:Math.floor(D.totalExamTime/60)}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-1",children:"Minutes totales"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-slate-700 dark:text-slate-200 mb-3",children:"Examens rÃ©cents"}),E.map((s,t)=>{var a,l,r,n;const i={facile:"bg-green-100 text-green-700",moyen:"bg-yellow-100 text-yellow-700",difficile:"bg-red-100 text-red-700"}[null==(a=s.examens)?void 0:a.difficulty]||"bg-gray-100 text-gray-700",o=s.score>=75?"text-green-600":s.score>=50?"text-yellow-600":"text-red-600";return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 dark:bg-slate-800 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-slate-900 dark:text-white",children:(null==(l=s.examens)?void 0:l.title)||"Examen"}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${i}`,children:(null==(r=s.examens)?void 0:r.difficulty)||"N/A"}),e.jsx("span",{className:"text-xs text-slate-500",children:"blanc"===(null==(n=s.examens)?void 0:n.type)?"ðŸŽ¯ Examen blanc":"ðŸ“š Examen de matiÃ¨re"}),e.jsxs("span",{className:"text-xs text-slate-500 flex items-center gap-1",children:[e.jsx(v,{className:"w-3 h-3"}),s.time_taken?`${Math.floor(s.time_taken/60)} min`:"N/A"]})]})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("p",{className:`text-2xl font-bold ${o}`,children:[s.score,"%"]}),e.jsx("p",{className:"text-xs text-slate-500",children:new Date(s.completed_at).toLocaleDateString("fr-FR",{day:"numeric",month:"short"})})]})]},s.id)})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs(m,{onClick:()=>a("/exam"),className:"gap-2",children:[e.jsx(h,{className:"w-4 h-4"}),"Passer un nouvel examen"]})})]})]})})]})}export{K as default};
