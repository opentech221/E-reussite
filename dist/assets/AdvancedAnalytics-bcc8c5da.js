import{r as e,j as s}from"./vendor-react-470eca1f.js";import{e as t,s as a,C as r,a as c,b as n,f as l,c as i}from"./index-80385b81.js";import{T as o,a as d,b as m,c as u}from"./tabs-04421a9d.js";import{P as h}from"./progress-d9418a6f.js";import{B as x}from"./badge-3c6eba89.js";import{f as j}from"./analytics-0f16126e.js";import{c as p,p as g,g as f,aI as v,ao as b,az as y,Z as N,x as w,f as _,ax as S}from"./vendor-ui-297a683c.js";import{m as z,R as k,a as A,C,X as D,Y as M,T as E,g as T,b as $,B as q,h as I,i as O,j as P,k as K,l as V,n as H,f as B}from"./vendor-charts-0ffd78b1.js";import"./vendor-supabase-1d8f37f5.js";import"./vendor-router-da2b77bd.js";const Q=()=>{const{user:Q}=t(),[F,L]=e.useState(!0),[R,J]=e.useState("progression"),[W,G]=e.useState([]),[Y,U]=e.useState([]),[X,Z]=e.useState(null),[ee,se]=e.useState([]),[te,ae]=e.useState([]),[re,ce]=e.useState([]),[ne,le]=e.useState([]),[ie,oe]=e.useState([]),[de,me]=e.useState([]),[ue,he]=e.useState([]);e.useEffect(()=>{Q&&xe()},[Q]);const xe=async()=>{try{L(!0);const e=new Date;e.setDate(e.getDate()-30);const{data:s}=await a.from("quiz_with_subject").select("id, score, completed_at, time_taken, subject_name, subject_color, chapter_title").eq("user_id",Q.id).gte("completed_at",e.toISOString()).order("completed_at",{ascending:!0}),{data:t}=await a.from("user_subject_stats").select("matiere_id, subject_name, subject_color, chapters_completed, total_time_seconds, last_activity").eq("user_id",Q.id);ce(t||[]);const{data:r}=await a.from("user_progress").select("\n          id,\n          chapitre_id,\n          completed,\n          time_spent,\n          created_at,\n          updated_at,\n          chapitres:chapitre_id (\n            title,\n            matieres:matiere_id (\n              name,\n              color\n            )\n          )\n        ").eq("user_id",Q.id).eq("completed",!0).gte("created_at",e.toISOString()).order("created_at",{ascending:!0}),c=je(s,r);G(c);const n=pe(s);U(n);const l=ge(s);ae(l);const i=fe(s,r);le(i);const o=ve(s,r);oe(o);const{weak:d,strong:m}=be(s);me(d),he(m);const u=Ne(s,r,l);Z(u);const h=we(c,l);se(h),L(!1)}catch(e){L(!1)}},je=(e,s)=>{const t=[],a=new Date;for(let r=29;r>=0;r--){const c=new Date(a);c.setDate(c.getDate()-r);const n=c.toISOString().split("T")[0],l=(null==e?void 0:e.filter(e=>e.completed_at.startsWith(n)))||[],i=(null==s?void 0:s.filter(e=>{var s;return null==(s=e.created_at)?void 0:s.startsWith(n)}))||[],o=l.length>0?l.reduce((e,s)=>e+s.score,0)/l.length:0;t.push({date:c.toLocaleDateString("fr-FR",{day:"2-digit",month:"short"}),score:Math.round(o),quizzes:l.length,lessons:i.length,total:l.length+i.length})}return t},pe=e=>{if(!e||0===e.length)return[];const s={},t=[];for(let r=3;r>=0;r--){const e=new Date;e.setDate(e.getDate()-7*r);const s=`S${Math.floor(e.getDate()/7)+1}`;t.push(s)}[...new Set(e.map(e=>e.subject_name))].forEach(e=>{s[e]=t.map(s=>({week:s,subject:e,avgScore:0,count:0,scores:[]}))}),e.forEach(e=>{const t=e.subject_name||"Autre",a=new Date(e.completed_at),r=Math.floor((new Date-a)/864e5),c=Math.min(3,Math.floor(r/7));s[t]&&s[t][c]&&(s[t][c].scores.push(e.score),s[t][c].count++)});const a=[];return Object.keys(s).forEach(e=>{s[e].forEach(e=>{e.scores.length>0&&(e.avgScore=Math.round(e.scores.reduce((e,s)=>e+s,0)/e.scores.length),a.push({subject:e.subject,week:e.week,score:e.avgScore,count:e.count}))})}),a},ge=e=>{if(!e||0===e.length)return[];const s={};return e.forEach(e=>{const t=e.subject_name||"Autre";s[t]||(s[t]={subject:t,color:e.subject_color||"#6B7280",scores:[],totalQuizzes:0,totalTime:0,chapters:new Set}),s[t].scores.push(e.score),s[t].totalQuizzes++,s[t].totalTime+=e.time_taken||0,e.chapter_title&&s[t].chapters.add(e.chapter_title)}),Object.values(s).map(e=>{const s=Math.round(e.scores.reduce((e,s)=>e+s,0)/e.scores.length),t=ye(e.scores);return{subject:e.subject,color:e.color,avgScore:s,totalQuizzes:e.totalQuizzes,totalTime:Math.round(e.totalTime/60),chaptersCount:e.chapters.size,trend:t,scores:e.scores}}).sort((e,s)=>s.avgScore-e.avgScore)},fe=(e,s)=>{const t=Array(24).fill(0).map((e,s)=>({hour:`${s}h`,count:0,avgScore:0,scores:[],totalTime:0}));return null==e||e.forEach(e=>{const s=new Date(e.completed_at).getHours();t[s].count++,t[s].scores.push(e.score),t[s].totalTime+=e.time_taken||0}),null==s||s.forEach(e=>{const s=new Date(e.created_at).getHours();t[s].count++,t[s].totalTime+=e.time_spent||0}),t.forEach(e=>{e.scores.length>0&&(e.avgScore=Math.round(e.scores.reduce((e,s)=>e+s,0)/e.scores.length)),e.totalTime=Math.round(e.totalTime/60)}),t.filter(e=>e.count>0)},ve=(e,s)=>{const t=[],a=["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],r=Array.from({length:24},(e,s)=>s);return a.forEach(e=>{r.forEach(s=>{t.push({day:e,hour:s,count:0,avgScore:0,scores:[],totalTime:0})})}),null==e||e.forEach(e=>{const s=new Date(e.completed_at),r=a[s.getDay()],c=s.getHours(),n=t.find(e=>e.day===r&&e.hour===c);n&&(n.count++,n.scores.push(e.score),n.totalTime+=e.time_taken||0)}),null==s||s.forEach(e=>{const s=new Date(e.created_at),r=a[s.getDay()],c=s.getHours(),n=t.find(e=>e.day===r&&e.hour===c);n&&(n.count++,n.totalTime+=e.time_spent||0)}),t.forEach(e=>{e.scores.length>0&&(e.avgScore=Math.round(e.scores.reduce((e,s)=>e+s,0)/e.scores.length)),e.totalTime=Math.round(e.totalTime/60)}),t.filter(e=>e.count>0)},be=e=>{if(!e||0===e.length)return{weak:[],strong:[]};const s={};e.forEach(e=>{const t=e.subject_name||"Autre";s[t]||(s[t]={subject:t,color:e.subject_color||"#6B7280",scores:[],chapters:new Set}),s[t].scores.push(e.score),e.chapter_title&&s[t].chapters.add(e.chapter_title)});const t=Object.values(s).map(e=>({subject:e.subject,color:e.color,avgScore:Math.round(e.scores.reduce((e,s)=>e+s,0)/e.scores.length),quizCount:e.scores.length,chaptersCount:e.chapters.size}));return{weak:t.filter(e=>e.avgScore<50||e.quizCount<3).map(e=>({...e,reason:e.avgScore<50?`Moyenne faible (${e.avgScore}%)`:"Peu de pratique"})).slice(0,5),strong:t.filter(e=>e.avgScore>=75&&e.quizCount>=3).sort((e,s)=>s.avgScore-e.avgScore).slice(0,5)}},ye=e=>{if(e.length<2)return 0;const s=Math.floor(e.length/2),t=e.slice(0,s),a=e.slice(s),r=t.reduce((e,s)=>e+s,0)/t.length,c=a.reduce((e,s)=>e+s,0)/a.length;return Math.round(c-r)},Ne=(e,s,t)=>{const a=(null==e?void 0:e.length)||0,r=(null==s?void 0:s.length)||0,c=(null==e?void 0:e.length)>0?e.reduce((e,s)=>e+s.score,0)/e.length:0;let n=0;n+=c/100*40;const l=new Set([...e||[],...s||[]].map(e=>{const s=e.completed_at||e.created_at;return s?s.split("T")[0]:null}).filter(Boolean)).size;n+=l/30*30;const i=a+r;let o,d,m,u;return n+=30*Math.min(i/100,1),n=Math.round(n),n>=80?(o="Excellent",d="green",m="Vous êtes très bien préparé(e) pour les examens !",u=["Continuez votre rythme actuel","Concentrez-vous sur les révisions","Pratiquez avec des examens blancs"]):n>=60?(o="Bon",d="blue",m="Vous êtes sur la bonne voie, continuez !",u=["Augmentez légèrement votre charge de travail","Renforcez vos points faibles","Maintenez votre régularité"]):n>=40?(o="Moyen",d="yellow",m="Il faut intensifier votre préparation.",u=["Augmentez significativement votre temps d'étude","Travaillez sur toutes les matières","Faites plus de quiz et exercices"]):(o="Insuffisant",d="red",m="Attention ! Votre préparation nécessite une action urgente.",u=["Établissez un planning d'étude rigoureux","Consacrez plusieurs heures par jour à l'étude","Demandez de l'aide si nécessaire"]),{score:n,level:o,color:d,message:m,recommendations:u,stats:{avgScore:Math.round(c),totalQuizzes:a,totalLessons:r,activeDays:l,weakSubjects:t.slice(0,3).map(e=>e.subject)}}},we=(e,s)=>{const t=[],a=e.slice(-7).map(e=>e.score).filter(e=>e>0),r=e.slice(0,7).map(e=>e.score).filter(e=>e>0);if(a.length>0&&r.length>0){const e=a.reduce((e,s)=>e+s,0)/a.length-r.reduce((e,s)=>e+s,0)/r.length;t.push({type:"score",title:"Évolution des scores",value:Math.round(e),status:e>0?"improving":e<0?"declining":"stable",icon:e>0?b:S,color:e>0?"green":e<0?"red":"gray"})}const c=e.slice(-7).reduce((e,s)=>e+s.total,0)-e.slice(0,7).reduce((e,s)=>e+s.total,0);return t.push({type:"activity",title:"Niveau d'activité",value:c,status:c>0?"improving":c<0?"declining":"stable",icon:y,color:c>0?"green":c<0?"red":"gray"}),s.forEach(e=>{0!==e.trend&&t.push({type:"subject",title:e.subject,value:e.trend,status:e.trend>0?"improving":"declining",icon:p,color:e.trend>0?"green":"red"})}),t};return F?s.jsx("div",{className:"container mx-auto px-4 py-8",children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})}):s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs(z.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[s.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-3",children:[s.jsx(g,{className:"w-8 h-8 text-primary"}),"Analytics Avancés"]}),s.jsx("p",{className:"text-muted-foreground",children:"Analyse approfondie de vos performances et prédictions IA"})]}),X&&s.jsx(z.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"mb-8",children:s.jsxs(r,{className:`border-2 border-${X.color}-500 bg-gradient-to-br from-${X.color}-50 to-white dark:from-${X.color}-900/20 dark:to-slate-800`,children:[s.jsxs(c,{children:[s.jsxs(n,{className:"flex items-center gap-2",children:[s.jsx(g,{className:`w-6 h-6 text-${X.color}-600`}),"Prédiction IA - Préparation Examen"]}),s.jsx(l,{children:"Analyse basée sur vos 30 derniers jours d'activité"})]}),s.jsx(i,{children:s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:`text-6xl font-bold text-${X.color}-600 mb-2`,children:[X.score,"%"]}),s.jsx(x,{variant:"outline",className:`text-lg px-4 py-1 border-${X.color}-500`,children:X.level})]}),s.jsx(h,{value:X.score,className:"h-3"}),s.jsx("p",{className:"text-center text-muted-foreground",children:X.message})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[s.jsx(f,{className:"w-5 h-5"}),"Recommandations IA"]}),s.jsx("ul",{className:"space-y-2",children:X.recommendations.map((e,t)=>s.jsxs("li",{className:"flex items-start gap-2",children:[s.jsx(v,{className:`w-5 h-5 text-${X.color}-600 mt-0.5`}),s.jsx("span",{className:"text-sm",children:e})]},t))}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-4",children:[s.jsxs("div",{className:"bg-white dark:bg-slate-700 rounded-lg p-3 text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-primary",children:[X.stats.avgScore,"%"]}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Score moyen"})]}),s.jsxs("div",{className:"bg-white dark:bg-slate-700 rounded-lg p-3 text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-primary",children:X.stats.activeDays}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Jours actifs"})]})]})]})]})})]})}),s.jsxs(o,{value:R,onValueChange:e=>{J(e),j("analytics_tab_change",{tab:e})},className:"space-y-6",children:[s.jsxs(d,{className:"grid w-full grid-cols-4",children:[s.jsxs(m,{value:"progression",className:"flex items-center gap-2",children:[s.jsx(b,{className:"w-4 h-4"}),"Progression"]}),s.jsxs(m,{value:"heatmap",className:"flex items-center gap-2",children:[s.jsx(y,{className:"w-4 h-4"}),"Heatmap"]}),s.jsxs(m,{value:"performance",className:"flex items-center gap-2",children:[s.jsx(f,{className:"w-4 h-4"}),"Performance"]}),s.jsxs(m,{value:"trends",className:"flex items-center gap-2",children:[s.jsx(N,{className:"w-4 h-4"}),"Tendances"]})]}),s.jsxs(u,{value:"progression",className:"space-y-6",children:[s.jsxs(r,{children:[s.jsxs(c,{children:[s.jsx(n,{children:"Progression sur 30 jours"}),s.jsx(l,{children:"Évolution de vos scores et activités quotidiennes"})]}),s.jsx(i,{children:s.jsx(k,{width:"100%",height:300,children:s.jsxs(A,{data:W,children:[s.jsxs("defs",{children:[s.jsxs("linearGradient",{id:"colorScore",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"5%",stopColor:"#8b5cf6",stopOpacity:.8}),s.jsx("stop",{offset:"95%",stopColor:"#8b5cf6",stopOpacity:0})]}),s.jsxs("linearGradient",{id:"colorActivity",x1:"0",y1:"0",x2:"0",y2:"1",children:[s.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.8}),s.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]})]}),s.jsx(C,{strokeDasharray:"3 3"}),s.jsx(D,{dataKey:"date"}),s.jsx(M,{}),s.jsx(E,{}),s.jsx(T,{}),s.jsx($,{type:"monotone",dataKey:"score",stroke:"#8b5cf6",fillOpacity:1,fill:"url(#colorScore)",name:"Score moyen (%)"}),s.jsx($,{type:"monotone",dataKey:"total",stroke:"#3b82f6",fillOpacity:1,fill:"url(#colorActivity)",name:"Activités"})]})})})]}),s.jsxs(r,{children:[s.jsxs(c,{children:[s.jsx(n,{children:"Meilleurs moments d'étude"}),s.jsx(l,{children:"Analysez vos performances selon l'heure de la journée"})]}),s.jsx(i,{children:s.jsx(k,{width:"100%",height:250,children:s.jsxs(q,{data:ne,children:[s.jsx(C,{strokeDasharray:"3 3"}),s.jsx(D,{dataKey:"hour"}),s.jsx(M,{yAxisId:"left"}),s.jsx(M,{yAxisId:"right",orientation:"right"}),s.jsx(E,{}),s.jsx(T,{}),s.jsx(I,{yAxisId:"left",dataKey:"count",fill:"#3b82f6",name:"Activités"}),s.jsx(I,{yAxisId:"right",dataKey:"avgScore",fill:"#22c55e",name:"Score moyen (%)"})]})})})]})]}),s.jsx(u,{value:"heatmap",className:"space-y-6",children:s.jsxs(r,{children:[s.jsxs(c,{children:[s.jsx(n,{children:"Heatmap de Performance"}),s.jsx(l,{children:"Performance par matière sur les 4 dernières semaines"})]}),s.jsxs(i,{children:[(()=>{const e=[...new Set(Y.map(e=>e.subject))];return 0===e.length?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx("p",{children:"Aucune donnée de performance disponible"}),s.jsx("p",{className:"text-sm mt-2",children:"Complétez des quiz pour voir votre heatmap"})]}):s.jsx("div",{className:"grid gap-4",children:e.map(e=>{const t=Y.filter(s=>s.subject===e);return s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"font-medium text-sm",children:e}),s.jsx("div",{className:"grid grid-cols-4 gap-2",children:t.length>0?t.map((e,t)=>{return s.jsxs("div",{className:"h-16 rounded-lg flex flex-col items-center justify-center transition-all hover:scale-105",style:{backgroundColor:(a=e.score,a>=80?"#22c55e":a>=60?"#3b82f6":a>=40?"#f59e0b":a>0?"#ef4444":"#e5e7eb")},children:[s.jsx("div",{className:"text-white font-bold text-lg",children:e.score>0?`${e.score}%`:"-"}),s.jsx("div",{className:"text-white text-xs opacity-80",children:e.week})]},t);var a}):s.jsx("div",{className:"col-span-4 text-center text-xs text-muted-foreground py-2",children:"Aucune donnée pour cette matière"})})]},e)})})})(),s.jsxs("div",{className:"flex items-center justify-center gap-4 mt-6 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:"#ef4444"}}),s.jsx("span",{children:"< 40%"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:"#f59e0b"}}),s.jsx("span",{children:"40-60%"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:"#3b82f6"}}),s.jsx("span",{children:"60-80%"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:"#22c55e"}}),s.jsx("span",{children:"> 80%"})]})]})]})]})}),s.jsxs(u,{value:"performance",className:"space-y-6",children:[s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs(r,{className:"border-red-200",children:[s.jsx(c,{children:s.jsxs(n,{className:"flex items-center gap-2 text-red-600",children:[s.jsx(w,{className:"w-5 h-5"}),"Points à améliorer"]})}),s.jsx(i,{className:"space-y-4",children:de.map((e,t)=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-medium",children:e.subject}),s.jsxs(x,{variant:"outline",className:"text-red-600",children:[e.average,"%"]})]}),s.jsx(h,{value:e.average,className:"h-2"}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.count," quiz complétés"]})]},t))})]}),s.jsxs(r,{className:"border-green-200",children:[s.jsx(c,{children:s.jsxs(n,{className:"flex items-center gap-2 text-green-600",children:[s.jsx(_,{className:"w-5 h-5"}),"Points forts"]})}),s.jsx(i,{className:"space-y-4",children:ue.map((e,t)=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-medium",children:e.subject}),s.jsxs(x,{variant:"outline",className:"text-green-600",children:[e.average,"%"]})]}),s.jsx(h,{value:e.average,className:"h-2"}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[e.count," quiz complétés"]})]},t))})]})]}),s.jsxs(r,{children:[s.jsxs(c,{children:[s.jsx(n,{children:"Vue d'ensemble par matière"}),s.jsx(l,{children:"Comparaison de vos performances moyennes"})]}),s.jsx(i,{children:s.jsx(k,{width:"100%",height:400,children:s.jsxs(O,{data:te,children:[s.jsx(P,{}),s.jsx(K,{dataKey:"subject"}),s.jsx(V,{angle:90,domain:[0,100]}),s.jsx(H,{name:"Performance",dataKey:"average",stroke:"#8b5cf6",fill:"#8b5cf6",fillOpacity:.6}),s.jsx(E,{})]})})})]})]}),s.jsxs(u,{value:"trends",className:"space-y-6",children:[s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:ee.map((e,t)=>{const a=e.icon;return s.jsx(z.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},children:s.jsx(r,{className:`border-2 border-${e.color}-200`,children:s.jsxs(i,{className:"pt-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx(a,{className:`w-8 h-8 text-${e.color}-600`}),s.jsx(x,{variant:"improving"===e.status?"default":"outline",className:""+("improving"===e.status?"bg-green-500":"declining"===e.status?"bg-red-500 text-white":"bg-gray-500 text-white"),children:"improving"===e.status?"En progression":"declining"===e.status?"En baisse":"Stable"})]}),s.jsx("h3",{className:"font-semibold mb-2",children:e.title}),s.jsxs("div",{className:"flex items-baseline gap-2",children:[s.jsxs("span",{className:`text-3xl font-bold text-${e.color}-600`,children:[e.value>0?"+":"",e.value,"score"===e.type?"%":""]}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"activity"===e.type?"activités":"points"})]})]})})},t)})}),s.jsxs(r,{children:[s.jsxs(c,{children:[s.jsx(n,{children:"Évolution par matière"}),s.jsx(l,{children:"Comparaison des performances moyennes"})]}),s.jsx(i,{children:s.jsx(k,{width:"100%",height:300,children:s.jsxs(q,{data:te,layout:"vertical",children:[s.jsx(C,{strokeDasharray:"3 3"}),s.jsx(D,{type:"number",domain:[0,100]}),s.jsx(M,{dataKey:"subject",type:"category",width:100}),s.jsx(E,{}),s.jsx(T,{}),s.jsx(I,{dataKey:"average",name:"Score moyen (%)",radius:[0,8,8,0],children:te.map((e,t)=>s.jsx(B,{fill:e.average>=80?"#22c55e":e.average>=60?"#3b82f6":e.average>=40?"#f59e0b":"#ef4444"},`cell-${t}`))})]})})})]}),s.jsxs(r,{children:[s.jsxs(c,{children:[s.jsx(n,{children:"Heatmap Hebdomadaire d'Activité"}),s.jsx(l,{children:"Votre activité sur les 7 derniers jours (par heure)"})]}),s.jsx(i,{children:ie&&ie.length>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"grid gap-2",children:["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"].map((e,t)=>{const a=ie.filter(s=>s.day===e);return s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-20 text-xs font-medium text-right pr-2",children:e.substring(0,3)}),s.jsx("div",{className:"flex-1 grid grid-cols-24 gap-1",children:Array.from({length:24},(t,r)=>{const c=a.find(e=>e.hour===r),n=(null==c?void 0:c.count)||0,l=0===n?"#f3f4f6":1===n?"#bfdbfe":2===n?"#60a5fa":n>=3?"#2563eb":"#f3f4f6";return s.jsx("div",{className:"h-6 rounded-sm transition-all hover:scale-110",style:{backgroundColor:l},title:`${e} ${r}h: ${n} activité(s)`},r)})})]},e)})}),s.jsxs("div",{className:"flex items-center justify-between mt-4 text-xs text-muted-foreground",children:[s.jsx("span",{children:"0h"}),s.jsx("span",{children:"6h"}),s.jsx("span",{children:"12h"}),s.jsx("span",{children:"18h"}),s.jsx("span",{children:"23h"})]}),s.jsxs("div",{className:"flex items-center justify-center gap-4 mt-4 text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:"#f3f4f6"}}),s.jsx("span",{children:"Aucune"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:"#bfdbfe"}}),s.jsx("span",{children:"Faible"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:"#60a5fa"}}),s.jsx("span",{children:"Moyenne"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:"#2563eb"}}),s.jsx("span",{children:"Élevée"})]})]})]}):s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx("p",{children:"Aucune donnée d'activité disponible"}),s.jsx("p",{className:"text-sm mt-2",children:"Complétez des quiz et leçons pour voir votre heatmap hebdomadaire"})]})})]})]})]})]})};export{Q as default};
