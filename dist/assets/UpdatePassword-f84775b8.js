import{r as e,j as s}from"./vendor-react-470eca1f.js";import{H as t}from"./Helmet-2c7e73f6.js";import{c as a,L as r}from"./vendor-router-da2b77bd.js";import{u as i,s as o,C as n,a as l,b as c,f as m,c as d,B as u}from"./index-80385b81.js";import{I as p}from"./input-5c98a0d4.js";import{m as x}from"./vendor-charts-0ffd78b1.js";import{B as j,aJ as h}from"./vendor-ui-297a683c.js";import"./vendor-supabase-1d8f37f5.js";const v=()=>{const{toast:v}=i(),f=a(),[b,N]=e.useState(""),[y,g]=e.useState(!1),[w,E]=e.useState("");e.useEffect(()=>{const{data:{subscription:e}}=o.auth.onAuthStateChange((e,s)=>{});return()=>e.unsubscribe()},[]);return s.jsxs(s.Fragment,{children:[s.jsxs(t,{children:[s.jsx("title",{children:"Mettre à jour le mot de passe - E-Réussite"}),s.jsx("meta",{name:"description",content:"Mettez à jour votre mot de passe E-Réussite."})]}),s.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-12 bg-slate-50",children:s.jsxs(x.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"w-full max-w-md",children:[s.jsxs(r,{to:"/",className:"flex items-center justify-center space-x-2 mb-8",children:[s.jsx(j,{className:"w-10 h-10 text-primary"}),s.jsx("span",{className:"text-3xl font-bold font-heading text-primary",children:"E-Réussite"})]}),s.jsxs(n,{className:"shadow-lg",children:[s.jsxs(l,{className:"text-center",children:[s.jsx(c,{className:"text-3xl",children:"Nouveau mot de passe"}),s.jsx(m,{children:"Entrez votre nouveau mot de passe."})]}),s.jsx(d,{children:s.jsxs("form",{onSubmit:async e=>{e.preventDefault(),g(!0),E("");const{error:s}=await o.auth.updateUser({password:b});s?(E(s.message),v({title:"Erreur",description:s.message,variant:"destructive"})):(v({title:"Mot de passe mis à jour !",description:"Vous pouvez maintenant vous connecter avec votre nouveau mot de passe."}),f("/login")),g(!1)},className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-slate-700 dark:text-slate-200 mb-2 font-medium",children:"Nouveau mot de passe"}),s.jsxs("div",{className:"relative",children:[s.jsx(h,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),s.jsx(p,{type:"password",value:b,onChange:e=>N(e.target.value),placeholder:"••••••••",className:"pl-12",required:!0,disabled:y})]})]}),w&&s.jsx("p",{className:"text-sm text-red-500",children:w}),s.jsx(u,{type:"submit",className:"w-full bg-primary text-white hover:bg-primary/90",disabled:y,children:y?"Mise à jour...":"Mettre à jour"})]})})]})]})})]})};export{v as default};
