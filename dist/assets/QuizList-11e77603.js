import{r as e,j as s}from"./vendor-react-470eca1f.js";import{L as t}from"./vendor-router-da2b77bd.js";import{i as a,C as r,c as l,B as i,a as n,b as d,f as c}from"./index-80385b81.js";import{B as o}from"./badge-3c6eba89.js";import{S as x}from"./ShareButton-304bb343.js";import{aa as m,p as u,g as h,c as j,J as b,aK as p}from"./vendor-ui-297a683c.js";import"./vendor-supabase-1d8f37f5.js";import"./vendor-charts-0ffd78b1.js";const f=()=>{const[f,g]=e.useState([]),[N,v]=e.useState(!0),[w,k]=e.useState(null);e.useEffect(()=>{y()},[]);const y=async()=>{try{v(!0);const{data:e,error:s}=await a.quiz.getQuizzes();if(s)return void k("Impossible de charger les quiz");const t=await Promise.all(e.map(async e=>{const{data:s}=await a.quiz.getQuizQuestions(e.id),t=(null==s?void 0:s.length)||0,r=({facile:.75,easy:.75,moyen:1,medium:1,difficile:1.5,hard:1.5}[(e.difficulty||"Moyen").toLowerCase()]||1)*t;return{...e,questionCount:t,time_limit:r}}));g(t)}catch(e){k("Une erreur est survenue")}finally{v(!1)}},z=e=>{switch(null==e?void 0:e.toLowerCase()){case"facile":case"easy":return"bg-green-100 text-green-800";case"moyen":case"medium":return"bg-yellow-100 text-yellow-800";case"difficile":case"hard":return"bg-red-100 text-red-800";default:return"bg-slate-100 text-slate-800 dark:text-slate-100"}},q=e=>{if(!e)return"15 min";if(Number.isInteger(e))return`${e} min`;const s=Math.floor(e),t=Math.round(60*(e-s));return 0===t?`${s} min`:45===t?`${s} min 45s`:30===t?`${s} min 30s`:`${s}-${s+1} min`};return N?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100 py-12",children:s.jsx("div",{className:"container mx-auto px-4",children:s.jsxs("div",{className:"flex items-center justify-center py-20",children:[s.jsx(m,{className:"w-8 h-8 animate-spin text-blue-600"}),s.jsx("span",{className:"ml-3 text-slate-600 dark:text-slate-300",children:"Chargement des quiz..."})]})})}):w?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100 dark:from-slate-950 dark:via-slate-900 dark:to-slate-950 py-12",children:s.jsx("div",{className:"container mx-auto px-4",children:s.jsx(r,{className:"max-w-md mx-auto dark:bg-slate-800 dark:border-white/20 border-2 shadow-lg dark:shadow-[0_0_30px_rgba(255,255,255,0.4)]",children:s.jsxs(l,{className:"p-6 text-center",children:[s.jsx("p",{className:"text-red-600 dark:text-red-400 mb-4",children:w}),s.jsx(i,{onClick:y,children:"Réessayer"})]})})})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 py-12",children:s.jsxs("div",{className:"container mx-auto px-4 max-w-6xl",children:[s.jsxs("div",{className:"text-center mb-12 bg-gradient-to-r from-blue-50 via-purple-50 to-pink-50 dark:from-slate-800 dark:via-slate-800 dark:to-slate-900 rounded-2xl p-8 shadow-lg",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-100 dark:bg-blue-900/50 rounded-full mb-4",children:s.jsx(u,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),s.jsx("h1",{className:"text-4xl font-bold text-slate-900 dark:text-white mb-3",children:"Quiz Disponibles"}),s.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-300 max-w-2xl mx-auto",children:"Testez vos connaissances et progressez à votre rythme. Choisissez un quiz pour commencer !"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:[s.jsx(r,{children:s.jsxs(l,{className:"p-6 text-center",children:[s.jsx(h,{className:"w-8 h-8 text-blue-600 mx-auto mb-2"}),s.jsx("div",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:f.length}),s.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Quiz disponibles"})]})}),s.jsx(r,{children:s.jsxs(l,{className:"p-6 text-center",children:[s.jsx(j,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),s.jsx("div",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:f.reduce((e,s)=>e+s.questionCount,0)}),s.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Questions au total"})]})}),s.jsx(r,{children:s.jsxs(l,{className:"p-6 text-center",children:[s.jsx(b,{className:"w-8 h-8 text-purple-600 mx-auto mb-2"}),s.jsx("div",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:f.reduce((e,s)=>e+(s.time_limit||15),0)}),s.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Minutes de contenu"})]})})]}),0===f.length?s.jsx(r,{children:s.jsxs(l,{className:"p-12 text-center",children:[s.jsx(u,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),s.jsx("p",{className:"text-slate-600 dark:text-slate-300 mb-4",children:"Aucun quiz disponible pour le moment."}),s.jsx(t,{to:"/my-courses",children:s.jsx(i,{children:"Voir les cours"})})]})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:f.map(e=>s.jsxs(r,{className:"hover:shadow-xl dark:bg-slate-800 dark:border-white/20 border-2 dark:shadow-[0_0_25px_rgba(255,255,255,0.3)] dark:hover:shadow-[0_0_35px_rgba(255,255,255,0.5)] transition-all duration-300 hover:-translate-y-1",children:[s.jsxs(n,{children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:(e.subject,s.jsx(u,{className:"w-6 h-6"}))}),s.jsx(o,{className:z(e.difficulty),children:e.difficulty||"Moyen"})]}),s.jsx(d,{className:"text-xl",children:e.title}),s.jsx(c,{className:"text-slate-600 dark:text-slate-300",children:e.description||"Testez vos connaissances sur ce sujet"})]}),s.jsxs(l,{children:[s.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-600 dark:text-slate-300 mb-6",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(j,{className:"w-4 h-4"}),s.jsxs("span",{children:[e.questionCount," questions"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(b,{className:"w-4 h-4"}),s.jsx("span",{children:q(e.time_limit)})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(t,{to:`/quiz/${e.id}`,className:"flex-1",children:s.jsxs(i,{className:"w-full group",children:["Commencer le quiz",s.jsx(p,{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform"})]})}),s.jsx(x,{url:`${window.location.origin}/quiz/${e.id}`,title:e.title,description:`Quiz de ${e.subject} - ${e.questionCount} questions`,type:"quiz",resourceId:e.id,options:{tags:[e.subject,e.difficulty,"quiz"]},variant:"outline",showIcon:!0,buttonText:""})]})]})]},e.id))}),s.jsx(r,{className:"mt-12 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 border-blue-200 dark:border-white/30 border-2 shadow-lg dark:shadow-[0_0_30px_rgba(255,255,255,0.3)]",children:s.jsx(l,{className:"p-6",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/50 rounded-full flex items-center justify-center flex-shrink-0",children:s.jsx(h,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-slate-900 dark:text-white mb-1",children:"Conseil"}),s.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Prenez votre temps pour lire chaque question. Vous pouvez voir vos résultats et progresser dans le classement après chaque quiz complété !"})]})]})})})]})})};export{f as default};
