import{r as e,j as s}from"./vendor-react-470eca1f.js";import{H as t}from"./Helmet-2c7e73f6.js";import{u as r,C as a,a as i,b as n,c as l,s as c}from"./index-80385b81.js";import"./table-dafb922e.js";import"./vendor-supabase-1d8f37f5.js";import"./vendor-ui-297a683c.js";import"./vendor-router-da2b77bd.js";import"./vendor-charts-0ffd78b1.js";const d=()=>{const{toast:d}=r(),[o,m]=e.useState([]),[h,p]=e.useState(!0);return e.useEffect(()=>{(async()=>{const{data:e,error:s}=await c.from("matieres").select("\n          *,\n          chapitres (\n            id,\n            title,\n            lecons (id, title)\n          )\n        ").order("name");s?d({title:"Erreur",description:"Impossible de charger les cours.",variant:"destructive"}):m(e),p(!1)})()},[d]),s.jsxs(s.Fragment,{children:[s.jsx(t,{children:s.jsx("title",{children:"Gestion des Cours - Admin"})}),s.jsxs("div",{className:"space-y-8",children:[s.jsx("h1",{className:"text-4xl font-bold font-heading",children:"Gestion des Cours"}),s.jsxs(a,{children:[s.jsx(i,{children:s.jsx(n,{children:"Structure des Cours"})}),s.jsx(l,{children:h?s.jsx("p",{children:"Chargement..."}):s.jsx("div",{className:"space-y-4",children:o.map(e=>s.jsxs("div",{className:"p-4 border rounded-lg",children:[s.jsxs("h3",{className:"font-bold text-lg",children:[e.name," (",e.level,")"]}),s.jsxs("p",{className:"text-sm text-slate-500",children:[e.chapitres.length," chapitres"]}),e.chapitres.length>0&&s.jsx("ul",{className:"pl-4 mt-2 space-y-1 text-sm",children:e.chapitres.map(e=>s.jsxs("li",{children:[e.title," (",e.lecons.length," le√ßons)"]},e.id))})]},e.id))})})]})]})]})};export{d as default};
