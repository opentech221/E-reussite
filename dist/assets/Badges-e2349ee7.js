import{r as e,j as a}from"./vendor-react-470eca1f.js";import{H as s}from"./Helmet-2c7e73f6.js";import{N as r}from"./Navbar-fef78110.js";import{e as t,s as i,C as l,c as o,B as n}from"./index-80385b81.js";import{P as c}from"./progress-d9418a6f.js";import{T as d,a as m,b as p,c as x}from"./tabs-04421a9d.js";import{u}from"./use-toast-e1db9400.js";import{f as g,d as b,g as h,c as j,p as y,aH as _,e as k,aQ as w,U as f,aJ as v,aI as N,a as q}from"./vendor-ui-297a683c.js";import{A as C,m as z}from"./vendor-charts-0ffd78b1.js";import"./vendor-supabase-1d8f37f5.js";import"./vendor-router-da2b77bd.js";const S={first_lesson:{id:"first_lesson",name:"Premier Pas",description:"Compl√©ter votre premi√®re le√ßon",icon:j,color:"bg-blue-500",category:"learning",points:10,rarity:"common"},knowledge_seeker:{id:"knowledge_seeker",name:"Apprenant Assidu",description:"Compl√©ter 10 le√ßons",icon:y,color:"bg-purple-500",category:"learning",points:50,rarity:"uncommon",requirement:{type:"lessons_completed",value:10}},chapter_master:{id:"chapter_master",name:"Finisseur",description:"Compl√©ter 5 chapitres",icon:j,color:"bg-green-500",category:"learning",points:100,rarity:"rare",requirement:{type:"chapters_completed",value:5}},course_champion:{id:"course_champion",name:"Ma√Ætre de cours",description:"Compl√©ter 1 cours complet",icon:g,color:"bg-yellow-500",category:"learning",points:150,rarity:"epic",requirement:{type:"courses_completed",value:1}},wisdom_keeper:{id:"wisdom_keeper",name:"Expert",description:"Compl√©ter 3 cours complets",icon:_,color:"bg-yellow-500",category:"learning",points:200,rarity:"rare",requirement:{type:"lessons_completed",value:50}},perfect_score:{id:"perfect_score",name:"Excellence",description:"Obtenir 100% √† un quiz",icon:b,color:"bg-yellow-400",category:"performance",points:25,rarity:"uncommon"},quiz_master:{id:"quiz_master",name:"Ma√Ætre des Quiz",description:"R√©ussir 20 quiz cons√©cutifs",icon:g,color:"bg-orange-500",category:"performance",points:100,rarity:"rare",requirement:{type:"consecutive_quiz_success",value:20}},math_genius:{id:"math_genius",name:"G√©nie des Maths",description:"Excellence en math√©matiques",icon:h,color:"bg-green-500",category:"subject",points:75,rarity:"rare"},daily_learner:{id:"daily_learner",name:"S√©rie d'apprentissage",description:"Se connecter 7 jours cons√©cutifs",icon:k,color:"bg-orange-600",category:"consistency",points:30,rarity:"uncommon",requirement:{type:"daily_streak",value:7}},dedication:{id:"dedication",name:"D√©vouement",description:"Se connecter 30 jours cons√©cutifs",icon:k,color:"bg-red-500",category:"consistency",points:150,rarity:"epic",requirement:{type:"daily_streak",value:30}},helping_hand:{id:"helping_hand",name:"Main Tendue",description:"Aider 5 autres √©tudiants",icon:w,color:"bg-pink-500",category:"social",points:40,rarity:"uncommon",requirement:{type:"help_others",value:5}},community_leader:{id:"community_leader",name:"Leader Communautaire",description:"√ätre dans le top 10 du classement",icon:f,color:"bg-indigo-500",category:"social",points:100,rarity:"epic"},baobab_wisdom:{id:"baobab_wisdom",name:"Sagesse du Baobab",description:"Accumuler 1000 points de connaissance",icon:_,color:"bg-amber-600",category:"special",points:250,rarity:"legendary",requirement:{type:"total_points",value:1e3}},ubuntu_spirit:{id:"ubuntu_spirit",name:"Esprit Ubuntu",description:"Incarner l'entraide et la solidarit√©",icon:f,color:"bg-emerald-600",category:"special",points:200,rarity:"legendary"}},E=({badge:e,earned:s=!1,progress:r=0,onClick:t})=>{const i=e.icon;return a.jsx(z.div,{whileHover:{scale:s?1.05:1.02},whileTap:{scale:.95},onClick:t,className:"relative cursor-pointer "+(s?"opacity-100":"opacity-60"),children:a.jsx(l,{className:`${{common:"border-slate-300 dark:border-white/20",uncommon:"border-blue-400 dark:border-white/30",rare:"border-purple-400 dark:border-white/40",epic:"border-orange-400 dark:border-white/50",legendary:"border-yellow-400 dark:border-white/60"}[e.rarity]} ${s?{common:"shadow-lg dark:shadow-[0_0_30px_rgba(255,255,255,0.4)]",uncommon:"shadow-lg dark:shadow-[0_0_35px_rgba(255,255,255,0.5)]",rare:"shadow-lg dark:shadow-[0_0_40px_rgba(255,255,255,0.6)]",epic:"shadow-lg dark:shadow-[0_0_45px_rgba(255,255,255,0.7)]",legendary:"shadow-xl dark:shadow-[0_0_50px_rgba(255,255,255,0.9)]"}[e.rarity]:{common:"shadow-sm dark:shadow-[0_0_15px_rgba(255,255,255,0.15)]",uncommon:"shadow-sm dark:shadow-[0_0_18px_rgba(255,255,255,0.2)]",rare:"shadow-sm dark:shadow-[0_0_20px_rgba(255,255,255,0.25)]",epic:"shadow-md dark:shadow-[0_0_25px_rgba(255,255,255,0.3)]",legendary:"shadow-md dark:shadow-[0_0_28px_rgba(255,255,255,0.35)]"}[e.rarity]} dark:bg-slate-800 transition-all duration-300 border-2 ${s?"dark:border-white/30 dark:shadow-[0_0_50px_rgba(255,255,255,0.3),inset_0_0_20px_rgba(255,255,255,0.05)]":"dark:border-slate-700 dark:shadow-[0_0_20px_rgba(255,255,255,0.1)]"}`,children:a.jsxs(o,{className:"p-4 text-center",children:[a.jsxs("div",{className:`w-16 h-16 mx-auto mb-3 rounded-full ${e.color} flex items-center justify-center relative`,children:[s?a.jsx(z.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200},children:a.jsx(i,{className:"w-8 h-8 text-white"})}):a.jsx(v,{className:"w-8 h-8 text-white opacity-70"}),"legendary"===e.rarity&&s&&a.jsx(z.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"absolute inset-0 rounded-full border-2 border-yellow-300"})]}),a.jsx("h3",{className:"font-semibold text-sm mb-2 "+(s?"text-slate-900 dark:text-slate-100":"text-slate-500 dark:text-slate-400"),children:e.name}),a.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-300 mb-3 leading-relaxed",children:e.description}),!s&&r>0&&a.jsxs("div",{className:"mb-2",children:[a.jsx(c,{value:r,className:"h-2"}),a.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1",children:[Math.round(r),"% compl√©t√©"]})]}),a.jsxs("div",{className:"flex items-center justify-center gap-2 text-xs",children:[a.jsx(b,{className:"w-3 h-3 text-yellow-500"}),a.jsxs("span",{className:"font-medium",children:[e.points," pts"]})]}),a.jsx("div",{className:"mt-2 px-2 py-1 rounded-full text-xs font-medium "+("common"===e.rarity?"bg-slate-100 dark:bg-slate-700 text-slate-600 dark:text-slate-300":"uncommon"===e.rarity?"bg-blue-100 dark:bg-blue-900/40 text-blue-700 dark:text-blue-300":"rare"===e.rarity?"bg-purple-100 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300":"epic"===e.rarity?"bg-orange-100 dark:bg-orange-900/40 text-orange-700 dark:text-orange-300":"bg-yellow-100 dark:bg-yellow-900/40 text-yellow-700 dark:text-yellow-300"),children:"common"===e.rarity?"Commun":"uncommon"===e.rarity?"Peu commun":"rare"===e.rarity?"Rare":"epic"===e.rarity?"√âpique":"L√©gendaire"})]})})})},O=({badge:e,earned:s,onClose:r})=>{if(!e)return null;const t=e.icon;return a.jsx(z.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 dark:bg-black/70 flex items-center justify-center z-50 p-4",onClick:r,children:a.jsx(z.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},onClick:e=>e.stopPropagation(),className:"bg-white dark:bg-slate-800 rounded-xl p-6 max-w-md w-full shadow-2xl dark:shadow-[0_0_40px_rgba(96,165,250,0.4)]",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:`w-24 h-24 mx-auto mb-4 rounded-full ${e.color} flex items-center justify-center relative`,children:[a.jsx(t,{className:"w-12 h-12 text-white"}),s&&a.jsx(z.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-2 -right-2 bg-green-500 rounded-full p-1",children:a.jsx(N,{className:"w-6 h-6 text-white"})})]}),a.jsx("h2",{className:"text-2xl font-bold mb-2 dark:text-slate-100",children:e.name}),a.jsx("p",{className:"text-slate-600 dark:text-slate-300 mb-4",children:e.description}),a.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(b,{className:"w-4 h-4 text-yellow-500"}),a.jsxs("span",{className:"font-semibold dark:text-slate-200",children:[e.points," points"]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(q,{className:"w-4 h-4 text-purple-500"}),a.jsx("span",{className:"capitalize dark:text-slate-200",children:e.rarity})]})]}),e.requirement&&a.jsx("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-lg p-3 mb-4",children:a.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-300",children:[a.jsx("strong",{children:"Condition :"})," ",e.requirement.type.replace("_"," ")," - ",e.requirement.value]})}),a.jsx(n,{onClick:r,className:"w-full",children:"Fermer"})]})})})},P=()=>{const[s,r]=e.useState([]),[n,c]=e.useState(null),[j,y]=e.useState(!0),[_,k]=e.useState({}),{user:w,userStats:f}=t();u();const v=e.useCallback(async()=>{if(w)try{const{data:e,error:a}=await i.from("user_badges").select("\n          id,\n          earned_at,\n          badge_id,\n          badges!inner (\n            badge_id,\n            name,\n            icon_name,\n            description\n          )\n        ").eq("user_id",w.id);if(a)throw a;const s=(null==e?void 0:e.map(e=>e.badge_id).filter(Boolean))||[];r(s)}catch(e){r([])}finally{y(!1)}else y(!1)},[w]),N=e.useCallback(()=>{const e={};Object.values(S).forEach(a=>{if(a.requirement&&f){const{type:s,value:r}=a.requirement;let t=0;switch(s){case"lessons_completed":t=f.lessons_completed||0;break;case"quiz_success":t=f.quiz_success||0;break;case"daily_streak":t=f.current_streak||0;break;case"total_points":t=f.total_points||0;break;case"help_others":t=f.help_count||0}e[a.id]=Math.min(t/r*100,100)}}),k(e)},[f]);e.useEffect(()=>{w?(v(),N()):y(!1)},[w,v,N]);const q={learning:"Apprentissage",performance:"Performance",consistency:"R√©gularit√©",social:"Social",special:"Sp√©ciaux"},z=()=>Object.values(S).filter(e=>s.includes(e.id));return j?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(l,{className:"dark:bg-slate-800 dark:border-white/20 shadow-lg dark:shadow-[0_0_30px_rgba(255,255,255,0.4)]",children:a.jsxs(o,{className:"p-6 text-center",children:[a.jsx(g,{className:"w-8 h-8 mx-auto mb-2 text-yellow-500"}),a.jsx("div",{className:"text-2xl font-bold dark:text-slate-100",children:z().length}),a.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Badges obtenus"})]})}),a.jsx(l,{className:"dark:bg-slate-800 dark:border-white/20 shadow-lg dark:shadow-[0_0_30px_rgba(255,255,255,0.4)]",children:a.jsxs(o,{className:"p-6 text-center",children:[a.jsx(b,{className:"w-8 h-8 mx-auto mb-2 text-blue-500"}),a.jsx("div",{className:"text-2xl font-bold dark:text-slate-100",children:z().reduce((e,a)=>e+a.points,0)}),a.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:"Points de badges"})]})}),a.jsx(l,{className:"dark:bg-slate-800 dark:border-white/20 shadow-lg dark:shadow-[0_0_30px_rgba(255,255,255,0.4)]",children:a.jsxs(o,{className:"p-6 text-center",children:[a.jsx(h,{className:"w-8 h-8 mx-auto mb-2 text-green-500"}),a.jsx("div",{className:"text-2xl font-bold dark:text-slate-100",children:Object.keys(S).length-z().length}),a.jsx("div",{className:"text-sm text-slate-600 dark:text-slate-300",children:"√Ä d√©bloquer"})]})})]}),a.jsxs(d,{defaultValue:"all",className:"w-full",children:[a.jsxs(m,{className:"grid w-full grid-cols-6",children:[a.jsx(p,{value:"all",children:"Tous"}),Object.entries(q).map(([e,s])=>a.jsx(p,{value:e,children:s},e))]}),a.jsx(x,{value:"all",className:"mt-6",children:a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4",children:Object.values(S).map(e=>a.jsx(E,{badge:e,earned:s.includes(e.id),progress:_[e.id]||0,onClick:()=>c(e)},e.id))})}),Object.entries(q).map(([e,r])=>a.jsx(x,{value:e,className:"mt-6",children:a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-4",children:Object.values(S).filter(a=>a.category===e).map(e=>a.jsx(E,{badge:e,earned:s.includes(e.id),progress:_[e.id]||0,onClick:()=>c(e)},e.id))})},e))]}),a.jsx(C,{children:n&&a.jsx(O,{badge:n,earned:s.includes(n.id),onClose:()=>c(null)})})]})},R=()=>a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900",children:[a.jsxs(s,{children:[a.jsx("title",{children:"Badges et R√©alisations - E-R√©ussite"}),a.jsx("meta",{name:"description",content:"D√©couvrez vos badges et r√©alisations sur E-R√©ussite"})]}),a.jsx(r,{}),a.jsxs("div",{className:"container mx-auto px-4 py-8 pt-24",children:[a.jsxs("div",{className:"text-center mb-8 bg-gradient-to-r from-blue-50 via-purple-50 to-pink-50 dark:from-slate-800 dark:via-slate-800 dark:to-slate-900 rounded-2xl p-8 shadow-lg",children:[a.jsx("h1",{className:"text-4xl font-bold text-slate-900 dark:text-white mb-4",children:"üèÜ Badges et R√©alisations"}),a.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-300 max-w-2xl mx-auto",children:"C√©l√©brez vos accomplissements et suivez votre progression avec notre syst√®me de badges inspir√© de la culture africaine"})]}),a.jsx(P,{})]})]});export{R as default};
